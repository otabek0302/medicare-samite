import{w as M,r as i,x as B,J as h,v as a,W as Q,B as c,y as T,z as u,O as z}from"./index-DPnYdkUz.js";import{u as A}from"./SettingData-o9nA5JFe.js";import{u as F,S as R,g as q,R as L,D as G,P as J,i as K}from"./Dashboard-yaE9KkgM.js";import{u as O}from"./index.esm-7HBFntiH.js";import{F as l,I as W}from"./utils-CbOPTj9R.js";import{B as H}from"./visually-hidden.style-CjB5JpNG.js";import"./HasPermission-B2qlt3qD.js";import"./index-DKSfyVZ9.js";import"./index-DJio6C7j.js";import"./createLucideIcon-cf9l0Mkm.js";import"./tr-B7dii5kF.js";import"./image-CECpK_E2.js";const U=h().subtract(K,"days").format("YYYY-MM-DD"),X=h().format("YYYY-MM-DD"),ue=()=>{var D;const f=O(),g="ErrorToast",{t}=M(),[r,P]=i.useState(1),m=i.useRef(null),[b,k]=i.useState(""),o=F(b,1e3),E=B(),[d,_]=i.useState({startDate:U,endDate:X}),{startDate:x,endDate:p}=d,y=(e,s)=>{const j=(e-1)*s,S=j+s-1;return{startIndex:j,endIndex:S}},{startIndex:N,endIndex:w}=y(r,50),V=async()=>{const e=u.role.name==="Doctor"?`get_doctor_review_page?start=${N}&end=${w}&start_date=${x}&end_date=${p}&search=${o}&doctor_id=${u.id}`:`get_doctor_review_page?start=${N}&end=${w}&start_date=${x}&end_date=${p}&search=${o}`,s=await z(u.token,e);return{data:s.data,totalRecord:s.total_record}},{data:n,error:v,isLoading:$,isFetching:I}=A({queryKey:["reviews",r,o,d],queryFn:V}),C=e=>{P(e)},Y=Math.ceil(((n==null?void 0:n.totalRecord)||0)/50);return i.useEffect(()=>{m.current&&m.current.scrollIntoView({behavior:"smooth",block:"start"})},[r]),v?(f.isActive(g)||f({id:g,title:t("reviews.error.title"),description:t("reviews.error.description"),status:"error",duration:3e3,isClosable:!0,position:"top"}),a.jsxDEV(Q,{errorCode:v.name},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:85,columnNumber:12},void 0)):a.jsxDEV(c,{ref:m,children:$?a.jsxDEV(c,{children:[a.jsxDEV(R,{height:8,width:400,mb:4},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:92,columnNumber:11},void 0),[...Array(10)].map((e,s)=>a.jsxDEV(R,{height:8,width:"100%",mb:2},s,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:98,columnNumber:13},void 0))]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:91,columnNumber:9},void 0):a.jsxDEV(c,{children:[a.jsxDEV(l,{justifyContent:"space-between",mb:4,children:[a.jsxDEV(l,{gap:4,children:[a.jsxDEV(W,{placeholder:t("reviews.search"),value:b,onChange:e=>k(e.target.value)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:112,columnNumber:15},void 0),a.jsxDEV(q,{dateRange:d,setDateRange:_,size:"md"},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:117,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:111,columnNumber:13},void 0),a.jsxDEV(T,{isLoading:I,onClick:()=>E.invalidateQueries(["reviews"]),rightIcon:a.jsxDEV(L,{size:16},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:122,columnNumber:26},void 0),size:"sm",colorScheme:"blue",children:t("reviews.buttons.refresh")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:108,columnNumber:11},void 0),a.jsxDEV(G,{minPad:3,data:(D=n==null?void 0:n.data)==null?void 0:D.map(e=>({ID:e.id,"Doctor Name":`${e.doct_f_name} ${e.doct_l_name}`,"patinent Name":`${e.f_name} ${e.l_name}`,"Appointment ID":e.appointment_id,Points:a.jsxDEV(H,{colorScheme:e.points>=4?"green":e.points>=2?"yellow":"red",children:e.points},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:137,columnNumber:17},void 0),Description:e.description,Date:h(e.created_at).format("DD MMM YYYY, hh:mm A")}))},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:129,columnNumber:11},void 0),a.jsxDEV(l,{justifyContent:"center",mt:4,children:a.jsxDEV(J,{currentPage:r,onPageChange:C,totalPages:Y},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:154,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:107,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:89,columnNumber:5},void 0)};export{ue as default};
