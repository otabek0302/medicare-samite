import{a7 as ie,r as u,d as H,u as le,c as J,e as de,m as Z,g as fe,h as me,an as pe,j as C,aj as he,f as F,l as j,a as P,ah as ye}from"./index-BFPSIpCx.js";import{c as be,l as xe,u as Me,a as Ee}from"./createLucideIcon-C1VZi4Qy.js";import{g as we,f as Ce}from"./HasPermission-Dz1RX8IC.js";import{u as Ie}from"./index-CexvglWR.js";import{i as ve}from"./index.esm-Cjy54hoM.js";import{c as $,a as ge}from"./utils-DGMmCGlW.js";function ke(e){var n;return((n=Q(e))==null?void 0:n.defaultView)??window}function Q(e){return ie(e)?e.ownerDocument:document}function De(e){return Q(e).activeElement}function Se(e){const{isOpen:n,ref:t}=e,[o,s]=u.useState(n),[r,c]=u.useState(!1);return u.useEffect(()=>{r||(s(n),c(!0))},[n,r,o]),we(()=>t.current,"animationend",()=>{s(n)}),{present:!(n?!1:!o),onComplete(){var a;const m=ke(t.current),l=new m.CustomEvent("animationend",{bubbles:!0});(a=t.current)==null||a.dispatchEvent(l)}}}function Oe(e){const n=e.current;if(!n)return!1;const t=De(n);return!t||n.contains(t)?!1:!!ve(t)}function _e(e,n){const{visible:t,focusRef:o}=n,s=!t;H(()=>{if(!s||Oe(e))return;const r=(o==null?void 0:o.current)||e.current;let c;if(r)return c=requestAnimationFrame(()=>{r.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[s,e,o])}function Le(e,n){const t=u.useId();return u.useMemo(()=>e||[n,t].filter(Boolean).join("-"),[e,n,t])}function Pe(e,...n){const t=Le(e);return u.useMemo(()=>n.map(o=>`${o}-${t}`),[t,n])}function Re(e){const{ref:n,handler:t,enabled:o=!0}=e,s=le(t),c=u.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;u.useEffect(()=>{if(!o)return;const i=d=>{W(d,n)&&(c.isPointerDown=!0)},m=d=>{if(c.ignoreEmulatedMouseEvents){c.ignoreEmulatedMouseEvents=!1;return}c.isPointerDown&&t&&W(d,n)&&(c.isPointerDown=!1,s(d))},l=d=>{c.ignoreEmulatedMouseEvents=!0,t&&c.isPointerDown&&W(d,n)&&(c.isPointerDown=!1,s(d))},a=X(n.current);return a.addEventListener("mousedown",i,!0),a.addEventListener("mouseup",m,!0),a.addEventListener("touchstart",i,!0),a.addEventListener("touchend",l,!0),()=>{a.removeEventListener("mousedown",i,!0),a.removeEventListener("mouseup",m,!0),a.removeEventListener("touchstart",i,!0),a.removeEventListener("touchend",l,!0)}},[t,n,s,c,o])}function W(e,n){var o,s;const t=((o=e.composedPath)==null?void 0:o.call(e)[0])??e.target;return t&&!X(t).contains(t)?!1:!((s=n.current)!=null&&s.contains(t))}function X(e){return(e==null?void 0:e.ownerDocument)??document}function Te(e,n,t,o){if(n==null)return o;if(!o)return e.find(c=>t(c).toLowerCase().startsWith(n.toLowerCase()));const s=e.filter(r=>t(r).toLowerCase().startsWith(n.toLowerCase()));if(s.length>0){let r;return s.includes(o)?(r=s.indexOf(o)+1,r===s.length&&(r=0),s[r]):(r=e.indexOf(s[0]),e[r])}return o}function Ae(e){const{key:n}=e;return n.length===1||n.length>1&&/[^a-zA-Z0-9]/.test(n)}function Fe(e={}){const{timeout:n=300,preventDefault:t=()=>!0}=e,[o,s]=u.useState([]),r=u.useRef(),c=()=>{r.current&&(clearTimeout(r.current),r.current=null)},i=()=>{c(),r.current=setTimeout(()=>{s([]),r.current=null},n)};u.useEffect(()=>c,[]);function m(l){return a=>{if(a.key==="Backspace"){const d=[...o];d.pop(),s(d);return}if(Ae(a)){const d=o.concat(a.key);t(a)&&(a.preventDefault(),a.stopPropagation()),s(d),l(d.join("")),i()}}}return m}const[Ne,je,Ke,ze]=be(),[Be,K]=J({strict:!1,name:"MenuContext"});function Y(e){return(e==null?void 0:e.ownerDocument)??document}function Ve(e){return Y(e).activeElement===e}function Ue(e={}){const{id:n,closeOnSelect:t=!0,closeOnBlur:o=!0,initialFocusRef:s,autoSelect:r=!0,isLazy:c,isOpen:i,defaultIsOpen:m,onClose:l,onOpen:a,placement:d="bottom-start",lazyBehavior:g="unmount",direction:y,computePositionOnMount:R=!1,...T}=e,M=u.useRef(null),_=u.useRef(null),p=u.useRef(!0),b=Ke(),O=u.useCallback(()=>{requestAnimationFrame(()=>{var f;(f=M.current)==null||f.focus({preventScroll:!1})})},[]),v=u.useCallback(()=>{const f=setTimeout(()=>{var I,D;if(s)(I=s.current)==null||I.focus();else if(!b.count())(D=M.current)==null||D.focus({preventScroll:!1});else{const S=b.firstEnabled();S&&E(S.index)}});U.current.add(f)},[b,s]),A=u.useCallback(()=>{const f=setTimeout(()=>{var I;if(!b.count())(I=M.current)==null||I.focus({preventScroll:!1});else{const D=b.lastEnabled();D&&E(D.index)}});U.current.add(f)},[b]),x=u.useCallback(()=>{a==null||a(),r?v():O()},[r,v,O,a]),{isOpen:h,onOpen:w,onClose:L,onToggle:V}=Ie({isOpen:i,defaultIsOpen:m,onClose:l,onOpen:x});Re({enabled:h&&o,ref:M,handler:f=>{var D,S,N;const I=((S=(D=f.composedPath)==null?void 0:D.call(f))==null?void 0:S[0])??f.target;(N=_.current)!=null&&N.contains(I)||L()}});const B=Ce({...T,enabled:h||R,placement:d,direction:y}),[k,E]=u.useState(-1);_e(M,{focusRef:_,visible:h});const te=Se({isOpen:h,ref:M}),[se,oe]=Pe(n,"menu-button","menu-list"),re=u.useCallback(()=>{w(),O()},[w,O]),U=u.useRef(new Set([]));u.useEffect(()=>{const f=U.current;return()=>{f.forEach(I=>clearTimeout(I)),f.clear()}},[]),H(()=>{var f;h||(E(-1),(f=M.current)==null||f.scrollTo(0,0))},[h]),H(()=>{h&&k===-1&&O()},[k,h]),u.useEffect(()=>{var I;if(!h)return;const f=b.item(k);(I=f==null?void 0:f.node)==null||I.focus({preventScroll:!p.current})},[b,k,h]);const ce=u.useCallback(()=>{w(),v()},[v,w]),ue=u.useCallback(()=>{p.current=!0,w(),A()},[w,A]),ae=u.useCallback(()=>{var N,G;const f=Y(M.current),I=(N=M.current)==null?void 0:N.contains(f.activeElement);if(!(h&&!I))return;const S=(G=b.item(k))==null?void 0:G.node;S==null||S.focus({preventScroll:!p.current})},[h,k,b]);return{openAndFocusMenu:re,openAndFocusFirstItem:ce,openAndFocusLastItem:ue,onTransitionEnd:ae,unstable__animationState:te,descendants:b,popper:B,buttonId:se,menuId:oe,forceUpdate:B.forceUpdate,orientation:"vertical",isOpen:h,onToggle:V,onOpen:w,onClose:L,menuRef:M,buttonRef:_,focusedIndex:k,closeOnSelect:t,closeOnBlur:o,autoSelect:r,setFocusedIndex:E,isLazy:c,lazyBehavior:g,initialFocusRef:s,scrollIntoViewRef:p}}function We(e={},n=null){const t=K(),{onToggle:o,popper:s,openAndFocusFirstItem:r,openAndFocusLastItem:c,scrollIntoViewRef:i}=t,m=u.useCallback(l=>{const a=l.key,g={Enter:r,ArrowDown:r,ArrowUp:c}[a];g&&(i.current=!0,l.preventDefault(),l.stopPropagation(),g(l))},[r,c,i]);return{...e,ref:Z(t.buttonRef,n,s.referenceRef),id:t.buttonId,"data-active":de(t.isOpen),"aria-expanded":t.isOpen,"aria-haspopup":"menu","aria-controls":t.menuId,onClick:$(e.onClick,o),onKeyDown:$(e.onKeyDown,m)}}function q(e){var n;return Ze(e)&&!!((n=e==null?void 0:e.getAttribute("role"))!=null&&n.startsWith("menuitem"))}function He(e={},n=null){const t=K();if(!t)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:o,setFocusedIndex:s,menuRef:r,isOpen:c,onClose:i,menuId:m,isLazy:l,lazyBehavior:a,scrollIntoViewRef:d,unstable__animationState:g}=t,y=je(),R=Fe({preventDefault:p=>p.key!==" "&&q(p.target)}),T=u.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const b=p.key,v={Tab:x=>x.preventDefault(),Escape:x=>{x.stopPropagation(),i()},ArrowDown:()=>{d.current=!0;const x=y.nextEnabled(o)??y.firstEnabled();x&&s(x.index)},ArrowUp:()=>{d.current=!0;const x=y.prevEnabled(o)??y.firstEnabled();x&&s(x.index)}}[b];if(v){p.preventDefault(),v(p);return}const A=R(x=>{const h=Te(y.values(),x,w=>{var L;return((L=w==null?void 0:w.node)==null?void 0:L.textContent)??""},y.item(o));if(h){const w=y.indexOf(h.node);s(w)}});q(p.target)&&A(p)},[y,o,R,i,s,d]),M=u.useRef(!1);c&&(M.current=!0);const _=xe({wasSelected:M.current,enabled:l,mode:a,isSelected:g.present});return{...e,ref:Z(r,n),children:_?e.children:null,tabIndex:-1,role:"menu",id:m,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:$(e.onKeyDown,T)}}function $e(e={}){const{popper:n,isOpen:t}=K();return n.getPopperProps({...e,style:{visibility:t?"visible":"hidden",...e.style}})}function qe(e={},n=null){const{onMouseEnter:t,onMouseMove:o,onMouseLeave:s,onClick:r,onFocus:c,isDisabled:i,isFocusable:m,closeOnSelect:l,type:a,...d}=e,g=K(),{setFocusedIndex:y,focusedIndex:R,closeOnSelect:T,onClose:M,menuId:_,scrollIntoViewRef:p}=g,b=u.useRef(null),O=`${_}-menuitem-${u.useId()}`,{index:v,register:A}=ze({disabled:i&&!m}),x=u.useCallback(E=>{t==null||t(E),!i&&(p.current=!1,y(v))},[y,v,i,t,p]),h=u.useCallback(E=>{o==null||o(E),b.current&&!Ve(b.current)&&x(E)},[x,o]),w=u.useCallback(E=>{s==null||s(E),!i&&y(-1)},[y,i,s]),L=u.useCallback(E=>{r==null||r(E),q(E.currentTarget)&&(l??T)&&M()},[M,r,T,l]),V=u.useCallback(E=>{c==null||c(E),y(v)},[y,c,v]),B=v===R,k=Me({onClick:L,onFocus:V,onMouseEnter:x,onMouseMove:h,onMouseLeave:w,ref:Z(A,b,n),isDisabled:i,isFocusable:m});return{...d,...k,type:a??k.type,id:O,role:"menuitem",tabIndex:B?0:-1}}function Ze(e){if(!Ge(e))return!1;const n=e.ownerDocument.defaultView??window;return e instanceof n.HTMLElement}function Ge(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}const[Je,z]=J({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Qe=e=>{const{children:n}=e,t=fe("Menu",e),o=me(e),{direction:s}=pe(),{descendants:r,...c}=Ue({...o,direction:s}),i=u.useMemo(()=>c,[c]),{isOpen:m,onClose:l,forceUpdate:a}=i;return C.jsx(Ne,{value:r,children:C.jsx(Be,{value:i,children:C.jsx(Je,{value:t,children:he(n,{isOpen:m,onClose:l,forceUpdate:a})})})})};Qe.displayName="Menu";const Xe=F((e,n)=>{const t=z();return C.jsx(P.button,{ref:n,...e,__css:{display:"inline-flex",appearance:"none",alignItems:"center",outline:0,...t.button}})}),Ye=F((e,n)=>{const{children:t,as:o,...s}=e,r=We(s,n),c=o||Xe;return C.jsx(c,{...r,className:j("chakra-menu__menu-button",e.className),children:C.jsx(P.span,{__css:{pointerEvents:"none",flex:"1 1 auto",minW:0},children:e.children})})});Ye.displayName="MenuButton";const ee=F((e,n)=>{const t=z();return C.jsx(P.span,{ref:n,...e,__css:t.command,className:"chakra-menu__command"})});ee.displayName="MenuCommand";const ne=e=>{const{className:n,children:t,...o}=e,s=z(),r=u.Children.only(t),c=u.isValidElement(r)?u.cloneElement(r,{focusable:"false","aria-hidden":!0,className:j("chakra-menu__icon",r.props.className)}):null,i=j("chakra-menu__icon-wrapper",n);return C.jsx(P.span,{className:i,...o,__css:s.icon,children:c})};ne.displayName="MenuIcon";const en=F((e,n)=>{const{type:t,...o}=e,s=z(),r=o.as||t?t??void 0:"button",c=u.useMemo(()=>({textDecoration:"none",color:"inherit",userSelect:"none",display:"flex",width:"100%",alignItems:"center",textAlign:"start",flex:"0 0 auto",outline:0,...s.item}),[s.item]);return C.jsx(P.button,{ref:n,type:r,...o,__css:c})}),nn=F((e,n)=>{const{icon:t,iconSpacing:o="0.75rem",command:s,commandSpacing:r="0.75rem",children:c,...i}=e,m=qe(i,n),a=t||s?C.jsx("span",{style:{pointerEvents:"none",flex:1},children:c}):c;return C.jsxs(en,{...m,className:j("chakra-menu__menuitem",m.className),children:[t&&C.jsx(ne,{fontSize:"0.8em",marginEnd:o,children:t}),a,s&&C.jsx(ee,{marginStart:r,children:s})]})});nn.displayName="MenuItem";const tn={enter:{visibility:"visible",opacity:1,scale:1,transition:{duration:.2,ease:[.4,0,.2,1]}},exit:{transitionEnd:{visibility:"hidden"},opacity:0,scale:.8,transition:{duration:.1,easings:"easeOut"}}},sn=P(ye.div),on=F(function(n,t){var g;const{rootProps:o,motionProps:s,...r}=n,{isOpen:c,onTransitionEnd:i,unstable__animationState:m}=K(),l=He(r,t),a=$e(o),d=z();return C.jsx(P.div,{...a,__css:{zIndex:n.zIndex??((g=d.list)==null?void 0:g.zIndex)},children:C.jsx(sn,{variants:tn,initial:!1,animate:c?"enter":"exit",__css:{outline:0,...d.list},...s,...l,className:j("chakra-menu__menu-list",l.className),onUpdate:i,onAnimationComplete:ge(m.onComplete,l.onAnimationComplete)})})});on.displayName="MenuList";/**
 * @license lucide-react v0.308.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=Ee("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);export{fn as C,Qe as M,Ye as a,on as b,nn as c};
