import{w as U,r as u,x as H,v as e,B as C,y as p,aG as De,z as w,D as Ce,J as g,V as we,L,ab as f,O as Ee,N as ve}from"./index-DPnYdkUz.js";import{u as K,j as R}from"./HasPermission-B2qlt3qD.js";import{A as Pe,a as Ve,u as Ie,N as ye,S as m,g as _e,D as Se,P as Ue,i as Ye}from"./Dashboard-yaE9KkgM.js";import{F as Me}from"./index-DJio6C7j.js";import{e as ze}from"./index-Bm_h8oZt.js";import{u as $e}from"./SettingData-o9nA5JFe.js";import{A as Oe}from"./Add-DGRRsfBL.js";import{h as Ae,u as Y,M as Te,b as Q,a as qe,c as W,g as Le,d as J,F as y,e as G,f as x}from"./index.esm-7HBFntiH.js";import{t as Re}from"./today-D_vLUvRX.js";import{D as B}from"./createLucideIcon-cf9l0Mkm.js";import{d as _,I as V,F as N}from"./utils-CbOPTj9R.js";import{u as S,I as F}from"./index-DKSfyVZ9.js";import"./tr-B7dii5kF.js";import"./image-CECpK_E2.js";import"./visually-hidden.style-CjB5JpNG.js";function Be({isOpen:n,onClose:s,data:a}){const{t:i}=U(),[c,r]=u.useState(!1),{register:o,handleSubmit:k,reset:l}=Ae(),j=H(),b=Y(),d=async E=>{const I={...E,id:a.id};try{r(!0);const h=await De(w.token,"update_appointment_checkin",I);r(!1),h.response===200?(x(b,"success",i("checkin.success.updated")),j.invalidateQueries({queryKey:["checkins"]}),l(),s()):x(b,"error",h.message)}catch(h){r(!1),x(b,"error",JSON.stringify(h))}};return e.jsxDEV(Te,{isOpen:n,onClose:s,isCentered:!0,size:"lg",scrollBehavior:"inside",children:[e.jsxDEV(Q,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:53,columnNumber:7},this),e.jsxDEV(qe,{as:"form",onSubmit:k(d),children:[e.jsxDEV(W,{fontSize:18,py:2,children:i("checkin.update.title")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:57,columnNumber:9},this),e.jsxDEV(Le,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:62,columnNumber:9},this),e.jsxDEV(B,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:63,columnNumber:9},this),e.jsxDEV(J,{children:[" ",e.jsxDEV(C,{pb:3,children:[e.jsxDEV(_,{isRequired:!0,children:[e.jsxDEV(y,{children:i("checkin.form.appointmentId")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:68,columnNumber:15},this),e.jsxDEV(V,{size:"sm",defaultValue:a==null?void 0:a.appointment_id,placeholder:i("checkin.form.appointmentId"),...o("appointment_id",{required:!0})},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:69,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:67,columnNumber:13},this),e.jsxDEV(_,{isRequired:!0,mt:3,children:[e.jsxDEV(y,{children:i("checkin.form.date")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:79,columnNumber:15},this),e.jsxDEV(V,{max:Re(),defaultValue:a==null?void 0:a.date,size:"sm",type:"date",step:60,placeholder:i("checkin.form.date"),...o("date",{required:!0}),isDisabled:!0},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:80,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:76,columnNumber:13},this),e.jsxDEV(_,{isRequired:!0,mt:3,children:[e.jsxDEV(y,{children:i("checkin.form.time")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:94,columnNumber:15},this),e.jsxDEV(V,{defaultValue:a==null?void 0:a.time,size:"sm",type:"time",step:60,placeholder:i("checkin.form.time"),...o("time",{required:!0})},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:95,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:91,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:66,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:64,columnNumber:9},this),e.jsxDEV(B,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:106,columnNumber:9},this),e.jsxDEV(G,{py:3,children:[e.jsxDEV(p,{colorScheme:"gray",mr:3,onClick:s,size:"sm",children:i("checkin.buttons.close")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:108,columnNumber:11},this),e.jsxDEV(p,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:c,children:i("checkin.buttons.update")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:115,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:54,columnNumber:7},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:47,columnNumber:5},this)}function Fe({isOpen:n,onClose:s,data:a}){const{t:i}=U(),c=Y(),r=u.useRef(null),o=H(),[k,l]=u.useState(!1),j=async()=>{const b={id:a.id};try{l(!0);const d=await Ce(w.token,"delete_appointment_checkin",b);l(!1),d.response===200?(x(c,"success",i("checkin.success.deleted")),o.invalidateQueries({queryKey:["checkins"]}),s()):x(c,"error",d.message)}catch(d){l(!1),x(c,"error",JSON.stringify(d))}};return e.jsxDEV(Pe,{isOpen:n,onClose:s,leastDestructiveRef:r,isCentered:!0,children:e.jsxDEV(Q,{children:e.jsxDEV(Ve,{children:[e.jsxDEV(W,{fontSize:"lg",fontWeight:"semi-bold",children:[i("checkin.delete.title")," ("," ",e.jsxDEV("b",{children:[a==null?void 0:a.id," , ",a==null?void 0:a.time," ",a==null?void 0:a.date]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:55,columnNumber:13},this)," ",")"]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:53,columnNumber:11},this),e.jsxDEV(J,{children:i("checkin.delete.confirm")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:61,columnNumber:11},this),e.jsxDEV(G,{children:[e.jsxDEV(p,{ref:r,onClick:s,colorScheme:"gray",size:"sm",children:i("checkin.delete.cancel")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:66,columnNumber:13},this),e.jsxDEV(p,{colorScheme:"red",onClick:j,ml:3,size:"sm",isLoading:k,children:i("checkin.delete.delete")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:73,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:65,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:52,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:46,columnNumber:5},this)}const He=g().subtract(Ye,"days").format("YYYY-MM-DD"),Ke=g().format("YYYY-MM-DD"),X=(n,s)=>{const a=(n-1)*s;let i=a+s-1;return{startIndex:a,endIndex:i}};X.propTypes={currentPage:f.number,itemsPerPage:f.number};function la(){const{t:n}=U(),{hasPermission:s}=K(),[a,i]=u.useState(1),{startIndex:c,endIndex:r}=X(a,50),[o,k]=u.useState(),{isOpen:l,onOpen:j,onClose:b}=S(),d=u.useRef(null),[E,I]=u.useState(""),h=Ie(E,1e3),[v,ee]=u.useState({startDate:He,endDate:Ke}),M=g(v.startDate).format("YYYY-MM-DD"),z=g(v.endDate).format("YYYY-MM-DD"),{isOpen:$,onOpen:ae,onClose:ie}=S(),{isOpen:O,onOpen:se,onClose:ne}=S(),me=we(),A=Y(),T="Errortoast",ce=async()=>{const t=w.role.name==="Doctor"?`get_appointment_check_in_page?start=${c}&end=${r}&search=${h}&start_date=${M}&end_date=${z}&doctor_id=${w.id}`:`get_appointment_check_in_page?start=${c}&end=${r}&search=${h}&start_date=${M}&end_date=${z}`,P=await Ee(w.token,t);return{data:P==null?void 0:P.data.map(he=>{const{id:ue,appointment_id:q,time:be,date:Ne,created_at:ge,updated_at:fe,doct_f_name:xe,doct_l_name:pe,patient_f_name:ke,patient_l_name:je}=he;return{id:ue,app_id:e.jsxDEV(ve,{to:`/appointment/${q}`,children:e.jsxDEV(N,{gap:1,align:"center",children:[q," ",e.jsxDEV(R,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:82,columnNumber:32},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:79,columnNumber:13},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:78,columnNumber:11},this),doctor:`${xe} ${pe}`,patient:`${ke} ${je}`,Date:g(Ne).format("DD MMM YYYY"),Time:g(be,"HH:mm:ss").format("hh:mm A"),created_at:ge,updated_at:fe}}),total_record:P.total_record}},re=t=>{k(t)},{isLoading:te,data:D,error:oe}=$e({queryKey:["checkins",a,h,v],queryFn:ce}),le=t=>{i(t)},de=Math.ceil((D==null?void 0:D.total_record)/50);return oe&&(A.isActive(T)||A({id:T,title:n("errors.oops"),description:n("errors.somethingWrong"),status:"error",duration:2e3,isClosable:!0,position:"top"})),s("CHECKIN_VIEW")?e.jsxDEV(C,{ref:d,children:[te||!D?e.jsxDEV(C,{children:[e.jsxDEV(N,{mb:5,justify:"space-between",children:[e.jsxDEV(m,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:132,columnNumber:13},this),e.jsxDEV(m,{w:200,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:129,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:141,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:146,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:151,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:156,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:161,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:166,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:171,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:176,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:181,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:186,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:128,columnNumber:9},this):e.jsxDEV(C,{children:[e.jsxDEV(N,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(V,{size:"md",placeholder:n("common.search"),w:400,maxW:"50vw",onChange:t=>I(t.target.value),value:E},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:198,columnNumber:13},this),e.jsxDEV(_e,{dateRange:v,setDateRange:ee,size:"md",setLastDays:()=>{}},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:206,columnNumber:13},this),e.jsxDEV(C,{children:e.jsxDEV(N,{align:"center",gap:5,children:[" ",e.jsxDEV(p,{size:"sm",colorScheme:"blue",onClick:()=>{const t=`${window.location.protocol}//${window.location.host}`;window.open(`${t}/admin/queue`,"_blank")},rightIcon:e.jsxDEV(R,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:225,columnNumber:30},this),children:n("buttons.showDisplay")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:217,columnNumber:17},this),e.jsxDEV(p,{isDisabled:!s("CHECKIN_ADD"),size:"sm",colorScheme:"blue",onClick:()=>j(),children:n("buttons.newCheckin")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:213,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:194,columnNumber:11},this),e.jsxDEV(Se,{data:D.data,onActionClick:e.jsxDEV(Z,{onClick:re,navigate:me,EditionOpen:ae,DeleteonOpen:se},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:241,columnNumber:15},this),minPad:0,imgLast:!1},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:238,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:193,columnNumber:9},this),e.jsxDEV(N,{justify:"center",mt:4,children:e.jsxDEV(Ue,{currentPage:a,onPageChange:le,totalPages:de},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:258,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:255,columnNumber:7},this),l&&e.jsxDEV(Oe,{isOpen:l,onClose:b},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:266,columnNumber:9},this),$&&e.jsxDEV(Be,{data:o,isOpen:$,onClose:ie},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:272,columnNumber:9},this),O&&e.jsxDEV(Fe,{isOpen:O,onClose:ne,data:o},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:280,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:126,columnNumber:5},this):e.jsxDEV(ye,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:123,columnNumber:46},this)}const Z=({onClick:n,rowData:s,DeleteonOpen:a,EditionOpen:i})=>{const{hasPermission:c}=K();return e.jsxDEV(N,{justify:"center",children:[e.jsxDEV(F,{"aria-label":"Edit",isDisabled:!c("CHECKIN_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{n(s),i()},icon:e.jsxDEV(ze,{fontSize:18,color:L.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:308,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:295,columnNumber:7},void 0),e.jsxDEV(F,{"aria-label":"Delete",isDisabled:!c("CHECKIN_DELETE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{n(s),a()},icon:e.jsxDEV(Me,{fontSize:18,color:L.colors.red[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:327,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:314,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:294,columnNumber:5},void 0)};Z.propTypes={onClick:f.func,rowData:f.object,DeleteonOpen:f.func,EditionOpen:f.func};export{la as default};
