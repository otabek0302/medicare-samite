import{V as me,r,x as oe,J as c,w as re,v as e,W as ce,B as N,y as Y,L as le,z as D,O as de}from"./index-DPnYdkUz.js";import{u as ue}from"./SettingData-o9nA5JFe.js";import{u as pe,N as he,S as v,g as be,h as ge,C as xe,R as Ne,D as fe,P as je,i as De,j as ve}from"./Dashboard-yaE9KkgM.js";import{e as Pe}from"./index-Bm_h8oZt.js";import{g as Ae}from"./CancellationReqBadge-BL_VhOTR.js";import{A as ke}from"./AddNewAppointment-J4JiBBad.js";import{u as $}from"./HasPermission-B2qlt3qD.js";import{g as we}from"./configs-CLwSBRW8.js";import{u as Ee}from"./index.esm-7HBFntiH.js";import{F as n,I as Ve}from"./utils-CbOPTj9R.js";import{u as _e,I as ye}from"./index-DKSfyVZ9.js";import{B as h}from"./visually-hidden.style-CjB5JpNG.js";import"./index-DJio6C7j.js";import"./createLucideIcon-cf9l0Mkm.js";import"./tr-B7dii5kF.js";import"./image-CECpK_E2.js";import"./useMutation-VqWrDSyY.js";import"./UsePatientsData-BRpxMIWP.js";import"./UsersComboBox-C1IpT6-x.js";import"./popover-Cm6ek3zh.js";import"./swiper-react-CGhKIvz9.js";import"./grid-BRKQYmn5.js";import"./AddPatients-DRITJh6Z.js";import"./IsdModal-CDLqM4QY.js";import"./today-D_vLUvRX.js";import"./input-group-DWmv1S0J.js";import"./input-addon-CU1dmJBi.js";import"./select-DPafIhJF.js";import"./split-CzYrjwZo.js";import"./card-body-CkuVqMTE.js";import"./chevron-down-Bq0qV0jN.js";const Ce=(l,s)=>{const m=(l-1)*s;let d=m+s-1;return{startIndex:m,endIndex:d}},Se=c().subtract(De,"days").format("YYYY-MM-DD"),Ye=c().format("YYYY-MM-DD"),$e=[{value:"Confirmed",label:"appointments.status.confirmed"},{value:"Visited",label:"appointments.status.visited"},{value:"Completed",label:"appointments.status.completed"},{value:"Pending",label:"appointments.status.pending"},{value:"Cancelled",label:"appointments.status.cancelled"},{value:"Rejected",label:"appointments.status.rejected"},{value:"Cancellation",label:"appointments.status.cancellation"}];function ha(){const l=me(),{isOpen:s,onOpen:m,onClose:d}=_e(),P=Ee(),A="Errortoast",[u,I]=r.useState(1),f=r.useRef(null),[k,M]=r.useState(""),b=pe(k,1e3),[p,T]=r.useState([]),{startIndex:w,endIndex:E}=Ce(u,50),{hasPermission:V}=$(),R=oe(),[g,B]=r.useState({startDate:Se,endDate:Ye}),{t}=re(),_=c(g.startDate).format("YYYY-MM-DD"),y=c(g.endDate).format("YYYY-MM-DD"),z=a=>{T(a)},F=async()=>{const a=D.role.name==="Doctor"?`get_appointments/doctor_id/page?start=${w}&end=${E}&doctor_id=${D.id}&search=${b}&start_date=${_}&end_date=${y}&status=${p.join(", ")}`:`get_appointments/page?start=${w}&end=${E}&search=${b}&start_date=${_}&end_date=${y}&status=${p.join(", ")}`;await we();const o=await de(D.token,a);return{data:o==null?void 0:o.data.map(G=>{const{id:J,patient_id:K,status:C,date:U,time_slots:X,type:j,payment_status:x,current_cancel_req_status:S,patient_f_name:Z,patient_l_name:ee,patient_phone:ae,doct_f_name:se,doct_l_name:te,doct_image:ie,source:ne}=G;return{id:J,image:ie,Doctor:`${se} ${te}`,Patient:`${Z} ${ee} - #${K}`,phone:ae,Status:ve(C),Date:c(U).format("DD MMM YYYY"),"Time Slots":c(X,"HH:mm:ss").format("hh:mm A"),Type:j==="Emergency"?e.jsxDEV(h,{colorScheme:"red",children:j},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:99,columnNumber:13},this):e.jsxDEV(h,{colorScheme:"green",children:j},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:101,columnNumber:13},this),"Payment Status":x==="Paid"?e.jsxDEV(h,{colorScheme:"green",children:x},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:105,columnNumber:13},this):x==="Refunded"?e.jsxDEV(h,{colorScheme:"blue",children:x},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:107,columnNumber:13},this):e.jsxDEV(h,{colorScheme:"red",children:"Not Paid"},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:109,columnNumber:13},this),"Cancellation Status":Ae(S),source:ne,filterStatus:C,current_cancel_req_status:S}}),total_record:o.total_record}},{isLoading:O,data:i,error:Q,isFetching:W,isRefetching:q}=ue({queryKey:["appointments",u,b,p,g],queryFn:F}),H=a=>{I(a)},L=Math.ceil((i==null?void 0:i.total_record)/50);return r.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})},[u]),Q?(P.isActive(A)||P({id:A,title:t("errors.oops"),description:t("errors.somethingWrong"),status:"error",duration:2e3,isClosable:!0,position:"top"}),e.jsxDEV(ce,{message:t("errors.somethingWrong")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:164,columnNumber:12},this)):V("APPOINTMENT_VIEW")?e.jsxDEV(N,{ref:f,children:[O||!i?e.jsxDEV(N,{children:[e.jsxDEV(n,{mb:5,justify:"space-between",children:[e.jsxDEV(v,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:176,columnNumber:13},this),e.jsxDEV(v,{w:200,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:173,columnNumber:11},this),[...Array(10)].map((a,o)=>e.jsxDEV(v,{h:10,w:"100%",mt:2},o,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:187,columnNumber:13},this))]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:172,columnNumber:9},this):e.jsxDEV(N,{children:[e.jsxDEV(n,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(n,{align:"center",gap:4,children:[e.jsxDEV(Ve,{size:"md",placeholder:t("common.search"),w:400,maxW:"50vw",onChange:a=>M(a.target.value),value:k},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:204,columnNumber:15},this),e.jsxDEV(be,{dateRange:g,setDateRange:B,size:"md"},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:201,columnNumber:13},this),e.jsxDEV(N,{children:e.jsxDEV(Y,{size:"sm",colorScheme:"blue",onClick:()=>{m()},isDisabled:!V("APPOINTMENT_ADD"),children:t("buttons.addNewAppointment")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:220,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:197,columnNumber:11},this),e.jsxDEV(n,{alignItems:"top",justifyContent:"space-between",children:[" ",e.jsxDEV(ge,{colorScheme:"blue",onChange:z,value:p,children:e.jsxDEV(n,{mb:5,gap:4,alignItems:"center",children:$e.map(a=>e.jsxDEV(xe,{value:a.value,children:t(a.label)},a.value,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:246,columnNumber:19},this))},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:241,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:237,columnNumber:13},this)," ",e.jsxDEV(Y,{isLoading:W||q,size:"sm",colorScheme:"blue",onClick:()=>{R.invalidateQueries(["appointments",u,b,p],{refetchInactive:!0})},rightIcon:e.jsxDEV(Ne,{size:14},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:263,columnNumber:26},this),children:t("appointments.buttons.refreshTable")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:233,columnNumber:11},this),e.jsxDEV(fe,{minPad:"1px 10px",data:i==null?void 0:i.data,onActionClick:e.jsxDEV(Ie,{onClick:()=>{},navigate:l},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:273,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:268,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:196,columnNumber:9},this),e.jsxDEV(n,{justify:"center",mt:4,children:e.jsxDEV(je,{currentPage:u,onPageChange:H,totalPages:L},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:285,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:282,columnNumber:7},this),s&&e.jsxDEV(ke,{isOpen:s,onClose:d},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:295,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:170,columnNumber:5},this):e.jsxDEV(he,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:167,columnNumber:50},this)}const Ie=({onClick:l,rowData:s,navigate:m})=>{const{hasPermission:d}=$();return e.jsxDEV(n,{justify:"center",children:d("APPOINTMENT_UPDATE")&&e.jsxDEV(ye,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{l(s),m(`/appointment/${s.id}`)},icon:e.jsxDEV(Pe,{fontSize:18,color:le.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:319,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:310,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:307,columnNumber:5},void 0)};export{ha as default};
