import{w as E,r as o,V as M,v as e,B as g,y as B,J as j,L as F,O as R,z}from"./index-BFPSIpCx.js";import{e as $}from"./index-xAROFF34.js";import{u as L}from"./SettingData-DvTyOSTZ.js";import{u as O,N as Q,D as q,P as G,S as p}from"./Dashboard-CmmBgoMl.js";import{A as W}from"./AddPatients-CBs7bJRg.js";import{u as k}from"./HasPermission-Dz1RX8IC.js";import{u as H}from"./UseSearchFilter-C_f_OzUw.js";import{u as J}from"./index.esm-Cjy54hoM.js";import{F as d,I as K}from"./utils-DGMmCGlW.js";import{u as U,I as X}from"./index-CexvglWR.js";import"./index-C7DuEf2v.js";import"./createLucideIcon-C1VZi4Qy.js";import"./tr-BasSmpYP.js";import"./image-4nR63Jb_.js";import"./visually-hidden.style-BGGO2DOy.js";import"./useMutation-BKXcVg_b.js";import"./IsdModal-4LOZauw6.js";import"./today-D_vLUvRX.js";import"./grid-N9FJ72fh.js";import"./input-group-BMKEi_kL.js";import"./input-addon-BqQivygC.js";import"./select-OppVOMPE.js";import"./split-CzYrjwZo.js";const D=50,Z=(a,i)=>{const s=(a-1)*i,n=s+i-1;return{startIndex:s,endIndex:n}},ee=a=>a==null?void 0:a.map(i=>{const{id:s,f_name:n,l_name:t,phone:c,gender:u,dob:l,email:f,image:h,created_at:b}=i;return{id:s,name:`${n} ${t}`,phone:c,gender:u,date_Of_Birth:l?j(l).format("DD MMM YYYY"):"N/A",email:f||"N/A",image:h,created_At:j(b).format("DD MMM YYYY hh:mm a")}}),ve=()=>{const{t:a}=E(),{hasPermission:i}=k(),[s,n]=o.useState(null),[t,c]=o.useState(1),[u,l]=o.useState(""),f=O(u,1e3),{startIndex:h,endIndex:b}=Z(t,D),{isOpen:w,onOpen:v,onClose:V}=U(),x=J(),A=M(),N=o.useRef(null),{isLoading:y,data:r,error:P}=L({queryKey:["patients",t,f],queryFn:async()=>{const m=await R(z.token,`get_patient/page?start=${h}&end=${b}`);return{data:m.data,totalRecord:m.total_record}}}),I=m=>c(m);o.useEffect(()=>{N.current&&N.current.scrollIntoView({behavior:"smooth",block:"start"})},[t]),o.useEffect(()=>{P&&!x.isActive("Errortoast")&&x({id:"Errortoast",title:a("patients.messages.error"),description:a("patients.messages.error"),status:"error",duration:2e3,isClosable:!0,position:"top"})},[P,x]);const _=ee(r==null?void 0:r.data),S=Math.ceil((r==null?void 0:r.totalRecord)/D),T=m=>n(m),{handleSearchChange:C,filteredData:Y}=H(_);return i("PATIENT_VIEW")?e.jsxDEV(g,{children:[y||!r?e.jsxDEV(ae,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:110,columnNumber:9},void 0):e.jsxDEV(g,{children:[e.jsxDEV(d,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(K,{size:"md",placeholder:a("patients.placeholder.search"),w:400,maxW:"50vw",onChange:m=>C(m.target.value)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV(B,{size:"sm",colorScheme:"blue",onClick:v,isDisabled:!i("PATIENT_ADD"),children:a("patients.add.buttons.add")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:125,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:113,columnNumber:11},void 0),e.jsxDEV(q,{imgLast:!0,minPad:"1px 20px",data:Y,onActionClick:e.jsxDEV(ie,{onClick:T,navigate:A,rowData:s},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:138,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:133,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:112,columnNumber:9},void 0),e.jsxDEV(d,{justify:"center",mt:4,children:e.jsxDEV(G,{currentPage:t,onPageChange:I,totalPages:S},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:150,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:147,columnNumber:7},void 0),e.jsxDEV(W,{isOpen:w,onClose:V,nextFn:()=>{n(null),c(1)}},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:156,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:108,columnNumber:5},void 0):e.jsxDEV(Q,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:105,columnNumber:46},void 0)},ae=()=>e.jsxDEV(g,{children:[e.jsxDEV(d,{mb:5,justify:"space-between",children:[e.jsxDEV(p,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:173,columnNumber:7},void 0),e.jsxDEV(p,{w:200,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:177,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:170,columnNumber:5},void 0),Array.from({length:10}).map((a,i)=>e.jsxDEV(p,{h:10,w:"100%",mt:2},i,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:183,columnNumber:7},void 0))]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:169,columnNumber:3},void 0),ie=({onClick:a,rowData:i,navigate:s})=>{const{hasPermission:n}=k(),{t}=E();return e.jsxDEV(d,{justify:"center",children:e.jsxDEV(X,{"aria-label":t("patients.update.actions.edit"),isDisabled:!n("PATIENT_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(i),s(`/patient/${i.id}`)},icon:e.jsxDEV($,{fontSize:18,color:F.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:210,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:199,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:198,columnNumber:5},void 0)};export{ve as default};
