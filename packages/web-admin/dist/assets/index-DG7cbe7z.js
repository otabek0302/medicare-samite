import{w as S,r as t,x as M,G as f,v as s,V as B,B as c,y as Q,z as u,N as T}from"./index-BqRQ5zR-.js";import{u as z}from"./SettingData-CxfeWvqW.js";import{u as A,S as y,g as F,R as q,D as G,P as L,i as K}from"./Dashboard-DfQ9GR_Q.js";import{u as H}from"./index.esm-CDWxJwJY.js";import{F as l,I as J}from"./utils-BcOZwoxx.js";import{B as O}from"./visually-hidden.style-BiwU0iRL.js";import"./HasPermission-BxGNMDGA.js";import"./index-CdSaDTFS.js";import"./index-CS1DgOx7.js";import"./createLucideIcon-Ha6tAQX1.js";import"./tr-IqXuou1v.js";import"./image-CynZshwF.js";const W=f().subtract(K,"days").format("YYYY-MM-DD"),X=f().format("YYYY-MM-DD"),ue=()=>{var h;const x=H(),p="ErrorToast",{t:r}=S(),[i,j]=t.useState(1),d=t.useRef(null),[g,R]=t.useState(""),m=A(g,1e3),P=M(),[o,v]=t.useState({startDate:W,endDate:X}),{startDate:b,endDate:D}=o,E=(e,n)=>{const _=(e-1)*n,Y=_+n-1;return{startIndex:_,endIndex:Y}},{startIndex:N,endIndex:w}=E(i,50),V=async()=>{const e=u.role.name==="Doctor"?`get_doctor_review_page?start=${N}&end=${w}&start_date=${b}&end_date=${D}&search=${m}&doctor_id=${u.id}`:`get_doctor_review_page?start=${N}&end=${w}&start_date=${b}&end_date=${D}&search=${m}`,n=await T(u.token,e);return{data:n.data,totalRecord:n.total_record}},{data:a,error:k,isLoading:U,isFetching:$}=z({queryKey:["reviews",i,m,o],queryFn:V}),I=e=>{j(e)},C=Math.ceil(((a==null?void 0:a.totalRecord)||0)/50);return t.useEffect(()=>{d.current&&d.current.scrollIntoView({behavior:"smooth",block:"start"})},[i]),k?(x.isActive(p)||x({id:p,title:r("reviews.error.title"),description:r("reviews.error.description"),status:"error",duration:3e3,isClosable:!0,position:"top"}),s.jsxDEV(B,{errorCode:k.name},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:85,columnNumber:12},void 0)):s.jsxDEV(c,{ref:d,children:U?s.jsxDEV(c,{children:[s.jsxDEV(y,{height:8,width:400,mb:4},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:92,columnNumber:11},void 0),[...Array(10)].map((e,n)=>s.jsxDEV(y,{height:8,width:"100%",mb:2},n,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:98,columnNumber:13},void 0))]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:91,columnNumber:9},void 0):s.jsxDEV(c,{children:[s.jsxDEV(l,{justifyContent:"space-between",mb:4,children:[s.jsxDEV(l,{gap:4,children:[s.jsxDEV(J,{placeholder:r("reviews.search"),value:g,onChange:e=>R(e.target.value)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:112,columnNumber:15},void 0),s.jsxDEV(F,{dateRange:o,setDateRange:v,size:"md"},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:117,columnNumber:15},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:111,columnNumber:13},void 0),s.jsxDEV(Q,{isLoading:$,onClick:()=>P.invalidateQueries(["reviews"]),rightIcon:s.jsxDEV(q,{size:16},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:122,columnNumber:26},void 0),size:"sm",colorScheme:"blue",children:r("reviews.buttons.refresh")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:119,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:108,columnNumber:11},void 0),s.jsxDEV(G,{minPad:3,data:(h=a==null?void 0:a.data)==null?void 0:h.map(e=>({ID:e.id,"Doctor Name":`${e.doct_f_name} ${e.doct_l_name}`,"patinent Name":`${e.f_name} ${e.l_name}`,"Appointment ID":e.appointment_id,Points:s.jsxDEV(O,{colorScheme:e.points>=4?"green":e.points>=2?"yellow":"red",children:e.points},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:137,columnNumber:17},void 0),Description:e.description,Date:f(e.created_at).format("DD MMM YYYY, hh:mm A")}))},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:129,columnNumber:11},void 0),s.jsxDEV(l,{justifyContent:"center",mt:4,children:s.jsxDEV(L,{currentPage:i,onPageChange:I,totalPages:C},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:154,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:153,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:107,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Reviews/index.jsx",lineNumber:89,columnNumber:5},void 0)};export{ue as default};
