import{V as ne,r as o,x as re,J as c,w as oe,v as e,W as ce,B as N,y as Y,L as de,z as D,O as le}from"./index-BFPSIpCx.js";import{u as ue}from"./SettingData-DvTyOSTZ.js";import{u as pe,N as he,S as v,g as be,h as ge,C as xe,R as Ne,D as fe,P as je,i as De,j as ve}from"./Dashboard-CmmBgoMl.js";import{e as Pe}from"./index-xAROFF34.js";import{g as Ae}from"./CancellationReqBadge-Bk85wPkm.js";import{A as ke}from"./AddNewAppointment-BxgmLSe8.js";import{u as $}from"./HasPermission-Dz1RX8IC.js";import{g as we}from"./configs-Ddv7PFSu.js";import{u as Ee}from"./index.esm-Cjy54hoM.js";import{F as m,I as Ve}from"./utils-DGMmCGlW.js";import{u as _e,I as ye}from"./index-CexvglWR.js";import{B as h}from"./visually-hidden.style-BGGO2DOy.js";import"./index-C7DuEf2v.js";import"./createLucideIcon-C1VZi4Qy.js";import"./tr-BasSmpYP.js";import"./image-4nR63Jb_.js";import"./useMutation-BKXcVg_b.js";import"./UsePatientsData-VzkZ5rkb.js";import"./UsersComboBox-C8RnCPnU.js";import"./popover-CAv5j0af.js";import"./swiper-react-B_L8W_gN.js";import"./grid-N9FJ72fh.js";import"./AddPatients-CBs7bJRg.js";import"./IsdModal-4LOZauw6.js";import"./today-D_vLUvRX.js";import"./input-group-BMKEi_kL.js";import"./input-addon-BqQivygC.js";import"./select-OppVOMPE.js";import"./split-CzYrjwZo.js";import"./card-body-DS4aeq0P.js";import"./chevron-down-CgeQl1Lc.js";const Ce=(d,s)=>{const n=(d-1)*s;let l=n+s-1;return{startIndex:n,endIndex:l}},Se=c().subtract(De,"days").format("YYYY-MM-DD"),Ye=c().format("YYYY-MM-DD"),$e=[{value:"Confirmed",label:"appointments.status.confirmed"},{value:"Visited",label:"appointments.status.visited"},{value:"Completed",label:"appointments.status.completed"},{value:"Pending",label:"appointments.status.pending"},{value:"Cancelled",label:"appointments.status.cancelled"},{value:"Rejected",label:"appointments.status.rejected"},{value:"Cancellation",label:"appointments.status.cancellation"}];function ha(){const d=ne(),{isOpen:s,onOpen:n,onClose:l}=_e(),P=Ee(),A="Errortoast",[u,I]=o.useState(1),f=o.useRef(null),[k,M]=o.useState(""),b=pe(k,1e3),[p,T]=o.useState([]),{startIndex:w,endIndex:E}=Ce(u,50),{hasPermission:V}=$(),R=re(),[g,B]=o.useState({startDate:Se,endDate:Ye}),{t:i}=oe(),_=c(g.startDate).format("YYYY-MM-DD"),y=c(g.endDate).format("YYYY-MM-DD"),z=a=>{T(a)},F=async()=>{const a=D.role.name==="Doctor"?`get_appointments/doctor_id/page?start=${w}&end=${E}&doctor_id=${D.id}&search=${b}&start_date=${_}&end_date=${y}&status=${p.join(", ")}`:`get_appointments/page?start=${w}&end=${E}&search=${b}&start_date=${_}&end_date=${y}&status=${p.join(", ")}`;await we();const r=await le(D.token,a);return{data:r==null?void 0:r.data.map(G=>{const{id:J,patient_id:K,status:C,date:U,time_slots:X,type:j,payment_status:x,current_cancel_req_status:S,patient_f_name:Z,patient_l_name:ee,patient_phone:ae,doct_f_name:se,doct_l_name:ie,doct_image:te,source:me}=G;return{id:J,image:te,Doctor:`${se} ${ie}`,Patient:`${Z} ${ee} - #${K}`,phone:ae,Status:ve(C),Date:c(U).format("DD MMM YYYY"),"Time Slots":c(X,"HH:mm:ss").format("hh:mm A"),Type:j==="Emergency"?e.jsxDEV(h,{colorScheme:"red",children:j},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:99,columnNumber:13},this):e.jsxDEV(h,{colorScheme:"green",children:j},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:101,columnNumber:13},this),"Payment Status":x==="Paid"?e.jsxDEV(h,{colorScheme:"green",children:x},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:105,columnNumber:13},this):x==="Refunded"?e.jsxDEV(h,{colorScheme:"blue",children:x},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:107,columnNumber:13},this):e.jsxDEV(h,{colorScheme:"red",children:"Not Paid"},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:109,columnNumber:13},this),"Cancellation Status":Ae(S),source:me,filterStatus:C,current_cancel_req_status:S}}),total_record:r.total_record}},{isLoading:O,data:t,error:Q,isFetching:W,isRefetching:q}=ue({queryKey:["appointments",u,b,p,g],queryFn:F}),H=a=>{I(a)},L=Math.ceil((t==null?void 0:t.total_record)/50);return o.useEffect(()=>{f.current&&f.current.scrollIntoView({behavior:"smooth",block:"start"})},[u]),Q?(P.isActive(A)||P({id:A,title:i("errors.oops"),description:i("errors.somethingWrong"),status:"error",duration:2e3,isClosable:!0,position:"top"}),e.jsxDEV(ce,{message:i("errors.somethingWrong")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:164,columnNumber:12},this)):V("APPOINTMENT_VIEW")?e.jsxDEV(N,{ref:f,children:[O||!t?e.jsxDEV(N,{children:[e.jsxDEV(m,{mb:5,justify:"space-between",children:[e.jsxDEV(v,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:176,columnNumber:13},this),e.jsxDEV(v,{w:200,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:173,columnNumber:11},this),[...Array(10)].map((a,r)=>e.jsxDEV(v,{h:10,w:"100%",mt:2},r,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:187,columnNumber:13},this))]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:172,columnNumber:9},this):e.jsxDEV(N,{children:[e.jsxDEV(m,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(m,{align:"center",gap:4,children:[e.jsxDEV(Ve,{size:"md",placeholder:i("common.search"),w:400,maxW:"50vw",onChange:a=>M(a.target.value),value:k},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:204,columnNumber:15},this),e.jsxDEV(be,{dateRange:g,setDateRange:B,size:"md"},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:201,columnNumber:13},this),e.jsxDEV(N,{children:e.jsxDEV(Y,{size:"sm",colorScheme:"blue",onClick:()=>{n()},isDisabled:!V("APPOINTMENT_ADD"),children:i("buttons.addNewAppointment")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:220,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:197,columnNumber:11},this),e.jsxDEV(m,{alignItems:"top",justifyContent:"space-between",children:[" ",e.jsxDEV(ge,{colorScheme:"blue",onChange:z,value:p,children:e.jsxDEV(m,{mb:5,gap:4,alignItems:"center",children:$e.map(a=>e.jsxDEV(xe,{value:a.value,children:i(a.label)},a.value,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:246,columnNumber:19},this))},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:241,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:237,columnNumber:13},this)," ",e.jsxDEV(Y,{isLoading:W||q,size:"sm",colorScheme:"blue",onClick:()=>{R.invalidateQueries(["appointments",u,b,p],{refetchInactive:!0})},rightIcon:e.jsxDEV(Ne,{size:14},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:263,columnNumber:26},this),children:i("appointments.buttons.refreshTable")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:233,columnNumber:11},this),e.jsxDEV(fe,{minPad:"1px 10px",data:t==null?void 0:t.data,onActionClick:e.jsxDEV(Ie,{onClick:()=>{},navigate:d},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:273,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:268,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:196,columnNumber:9},this),e.jsxDEV(m,{justify:"center",mt:4,children:e.jsxDEV(je,{currentPage:u,onPageChange:H,totalPages:L},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:285,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:282,columnNumber:7},this),s&&e.jsxDEV(ke,{isOpen:s,onClose:l},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:295,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:170,columnNumber:5},this):e.jsxDEV(he,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:167,columnNumber:50},this)}const Ie=({onClick:d,rowData:s,navigate:n})=>{const{hasPermission:l}=$();return e.jsxDEV(m,{justify:"center",children:l("APPOINTMENT_UPDATE")&&e.jsxDEV(ye,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{d(s),n(`/appointment/${s.id}`)},icon:e.jsxDEV(Pe,{fontSize:18,color:de.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:319,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:310,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:307,columnNumber:5},void 0)};export{ha as default};
