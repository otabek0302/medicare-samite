import{w as z,r,v as e,J as N,H,y as c,a5 as A,L as T,G}from"./index-BqRQ5zR-.js";import{u as h,I as q,b as J,A as W}from"./index-CdSaDTFS.js";import{u as $,h as K,S as u,F as k,L as Q,M as X,b as Y,a as Z,c as ee,g as se,d as ae,e as ie}from"./index.esm-CDWxJwJY.js";import{F as ne}from"./ForgetPassword-CHTMcGD6.js";import{F as D,d as j,I as w}from"./utils-BcOZwoxx.js";import{B as y}from"./visually-hidden.style-BiwU0iRL.js";import{I as re}from"./input-group-D9TmQQ8n.js";import{I as me}from"./input-element-D2_aulRN.js";import{R as oe,a as te}from"./radio-uc9LVGf-.js";import"./useMutation-9OMn6k9Q.js";import"./split-CzYrjwZo.js";function le(){return G().add(24,"hours").valueOf()}function De(){const{t:s}=z(),g=$(),{register:f,handleSubmit:P}=K(),{isOpen:E,onOpen:L,onClose:o}=h(),[U,t]=r.useState(!1),[b,V]=r.useState([]),[l,_]=r.useState(null),[p,S]=r.useState(),[m,C]=r.useState(!1),{isOpen:I,onOpen:R,onClose:F}=h(),O=()=>{C(!m)},v=async a=>{t(!0);try{const i=(await A.post(`${T}/login`,a)).data;t(!1),i.response===200?!i.data.role||i.data.role.length===0?d("login.errors.noPermission"):i.data.role.length>1?(V(i.data.role),S({data:i.data,token:i.token}),L()):x(i.data,i.token,i.data.role[0]):d("login.errors.wrongCredentials")}catch(n){t(!1),d("login.errors.generalError"),console.error(n)}},x=(a,n,i)=>{const B={...a,role:i,token:n,exp:le()};localStorage.setItem("admin",JSON.stringify(B)),g({title:"Login Success.",status:"success",duration:9e3,isClosable:!0,position:"top"}),window.location.reload("/")},d=a=>{g({title:s(a),status:"error",duration:9e3,isClosable:!0,position:"top"})},M=()=>{const a=b.find(n=>n.name===l);a&&(x(p.data,p.token,a),o())};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{minH:"100vh",direction:{base:"column",md:"row"},background:"url('/admin/loginbg.png')",backgroundSize:"cover",backgroundPosition:"center",children:[e.jsxDEV(D,{p:8,flex:1,align:"center",justify:"center",flexDir:"column",children:e.jsxDEV(u,{spacing:4,w:"full",maxW:"md",as:"form",onSubmit:P(v),bg:"gray.50",padding:8,borderRadius:8,minW:"600px",color:N("gray.800","gray.800"),children:[e.jsxDEV(H,{fontSize:"2xl",children:s("login.title")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:113,columnNumber:13},this),e.jsxDEV(j,{children:[e.jsxDEV(k,{children:[s("login.email"),e.jsxDEV(y,{bg:"transparent",color:"red",children:"*"},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:117,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:115,columnNumber:15},this),e.jsxDEV(w,{type:"email",isRequired:!0,placeholder:s("login.email"),...f("email")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:121,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:114,columnNumber:13},this),e.jsxDEV(j,{mt:5,children:[e.jsxDEV(k,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxDEV("span",{children:[s("login.password"),e.jsxDEV(y,{bg:"transparent",color:"red",children:"*"},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:125,columnNumber:17},this),e.jsxDEV(Q,{fontSize:14,color:"blue.500",onClick:R,children:s("login.forgotPassword")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:131,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:124,columnNumber:15},this),e.jsxDEV(re,{size:"md",children:[e.jsxDEV(w,{type:m?"text":"password",placeholder:s("login.password"),isRequired:!0,...f("password")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:136,columnNumber:17},this),e.jsxDEV(me,{width:"3rem",children:e.jsxDEV(q,{variant:"ghost",h:"1.75rem",size:"md",onClick:O,icon:m?e.jsxDEV(J,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:138,columnNumber:123},this):e.jsxDEV(W,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:138,columnNumber:148},this),"aria-label":m?"Hide password":"Show password",color:N("gray.800","gray.800")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:138,columnNumber:19},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:137,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:135,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:123,columnNumber:13},this),e.jsxDEV(c,{colorScheme:"blue",w:"100%",mt:10,type:"submit",isLoading:U,children:s("login.signIn")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:111,columnNumber:9},this),e.jsxDEV(D,{flex:1},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:147,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:110,columnNumber:7},this),e.jsxDEV(X,{isOpen:E,onClose:o,isCentered:!0,children:[e.jsxDEV(Y,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(Z,{children:[e.jsxDEV(ee,{children:s("login.loginAs")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:157,columnNumber:11},this),e.jsxDEV(se,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:158,columnNumber:11},this),e.jsxDEV(ae,{children:e.jsxDEV(oe,{onChange:_,value:l,children:e.jsxDEV(u,{children:[" ",b.map(a=>e.jsxDEV(te,{value:a.name,children:a.name},a.id,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:166,columnNumber:19},this))]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:161,columnNumber:13},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:159,columnNumber:11},this),e.jsxDEV(ie,{children:[e.jsxDEV(c,{colorScheme:"blue",mr:3,onClick:M,isDisabled:!l,children:s("login.continue")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:176,columnNumber:13},this),e.jsxDEV(c,{variant:"ghost",onClick:o,children:s("login.cancel")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:179,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:175,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:151,columnNumber:7},this),e.jsxDEV(ne,{isOpen:I,onClose:F},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:187,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Login.jsx",lineNumber:109,columnNumber:5},this)}export{De as default};
