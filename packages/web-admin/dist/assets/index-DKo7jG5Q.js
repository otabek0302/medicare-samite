import{U as re,r as o,x as me,G as c,w as oe,v as e,V as ce,B as N,y as S,K as de,z as k,N as le}from"./index-BqRQ5zR-.js";import{u as ue}from"./SettingData-CxfeWvqW.js";import{u as pe,N as fe,S as j,g as xe,h as be,C as ge,R as Ne,D as he,P as De,i as ke,j as je}from"./Dashboard-DfQ9GR_Q.js";import{e as _e}from"./index-D6RHo-Rw.js";import{g as ye}from"./CancellationReqBadge-B7S29pPS.js";import{A as Pe}from"./AddNewAppointment-5CBXtuAx.js";import{u as Y}from"./HasPermission-BxGNMDGA.js";import{g as Ae}from"./configs-BqM2m3ac.js";import{u as we}from"./index.esm-CDWxJwJY.js";import{F as i,I as Ee}from"./utils-BcOZwoxx.js";import{u as Ve,I as Ue}from"./index-CdSaDTFS.js";import{B as f}from"./visually-hidden.style-BiwU0iRL.js";import"./index-CS1DgOx7.js";import"./createLucideIcon-Ha6tAQX1.js";import"./tr-IqXuou1v.js";import"./image-CynZshwF.js";import"./useMutation-9OMn6k9Q.js";import"./UsePatientsData-DTyhFyzP.js";import"./UsersComboBox-B-um6-vK.js";import"./popover-DbwkstBv.js";import"./swiper-react-C_zwIgSk.js";import"./grid-DgSVtHSd.js";import"./AddPatients-CDuxvzLe.js";import"./IsdModal-DYnTCngq.js";import"./today-D_vLUvRX.js";import"./input-group-D9TmQQ8n.js";import"./input-addon-Cb0INng4.js";import"./select-BdYZ_n_k.js";import"./split-CzYrjwZo.js";import"./card-body-DyktQENp.js";import"./chevron-down-HmQIZ2wx.js";const ve=(d,t)=>{const r=(d-1)*t;let l=r+t-1;return{startIndex:r,endIndex:l}},Ce=c().subtract(ke,"days").format("YYYY-MM-DD"),Se=c().format("YYYY-MM-DD"),Ye=[{value:"Confirmed",label:"appointments.status.confirmed"},{value:"Visited",label:"appointments.status.visited"},{value:"Completed",label:"appointments.status.completed"},{value:"Pending",label:"appointments.status.pending"},{value:"Cancelled",label:"appointments.status.cancelled"},{value:"Rejected",label:"appointments.status.rejected"},{value:"Cancellation",label:"appointments.status.cancellation"}];function fs(){const d=re(),{isOpen:t,onOpen:r,onClose:l}=Ve(),_=we(),y="Errortoast",[u,$]=o.useState(1),h=o.useRef(null),[P,I]=o.useState(""),x=pe(P,1e3),[p,M]=o.useState([]),{startIndex:A,endIndex:w}=ve(u,50),{hasPermission:E}=Y(),T=me(),[b,R]=o.useState({startDate:Ce,endDate:Se}),{t:n}=oe(),V=c(b.startDate).format("YYYY-MM-DD"),U=c(b.endDate).format("YYYY-MM-DD"),B=s=>{M(s)},z=async()=>{const s=k.role.name==="Doctor"?`get_appointments/doctor_id/page?start=${A}&end=${w}&doctor_id=${k.id}&search=${x}&start_date=${V}&end_date=${U}&status=${p.join(", ")}`:`get_appointments/page?start=${A}&end=${w}&search=${x}&start_date=${V}&end_date=${U}&status=${p.join(", ")}`;await Ae();const m=await le(k.token,s);return{data:m==null?void 0:m.data.map(H=>{const{id:K,patient_id:L,status:v,date:J,time_slots:X,type:D,payment_status:g,current_cancel_req_status:C,patient_f_name:Z,patient_l_name:ee,patient_phone:se,doct_f_name:te,doct_l_name:ne,doct_image:ae,source:ie}=H;return{id:K,image:ae,Doctor:`${te} ${ne}`,Patient:`${Z} ${ee} - #${L}`,phone:se,Status:je(v),Date:c(J).format("DD MMM YYYY"),"Time Slots":c(X,"HH:mm:ss").format("hh:mm A"),Type:D==="Emergency"?e.jsxDEV(f,{colorScheme:"red",children:D},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:99,columnNumber:13},this):e.jsxDEV(f,{colorScheme:"green",children:D},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:101,columnNumber:13},this),"Payment Status":g==="Paid"?e.jsxDEV(f,{colorScheme:"green",children:g},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:105,columnNumber:13},this):g==="Refunded"?e.jsxDEV(f,{colorScheme:"blue",children:g},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:107,columnNumber:13},this):e.jsxDEV(f,{colorScheme:"red",children:"Not Paid"},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:109,columnNumber:13},this),"Cancellation Status":ye(C),source:ie,filterStatus:v,current_cancel_req_status:C}}),total_record:m.total_record}},{isLoading:F,data:a,error:O,isFetching:Q,isRefetching:q}=ue({queryKey:["appointments",u,x,p,b],queryFn:z}),W=s=>{$(s)},G=Math.ceil((a==null?void 0:a.total_record)/50);return o.useEffect(()=>{h.current&&h.current.scrollIntoView({behavior:"smooth",block:"start"})},[u]),O?(_.isActive(y)||_({id:y,title:n("errors.oops"),description:n("errors.somethingWrong"),status:"error",duration:2e3,isClosable:!0,position:"top"}),e.jsxDEV(ce,{message:n("errors.somethingWrong")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:164,columnNumber:12},this)):E("APPOINTMENT_VIEW")?e.jsxDEV(N,{ref:h,children:[F||!a?e.jsxDEV(N,{children:[e.jsxDEV(i,{mb:5,justify:"space-between",children:[e.jsxDEV(j,{w:400,h:8},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:176,columnNumber:13},this),e.jsxDEV(j,{w:200,h:8},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:180,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:173,columnNumber:11},this),[...Array(10)].map((s,m)=>e.jsxDEV(j,{h:10,w:"100%",mt:2},m,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:187,columnNumber:13},this))]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:172,columnNumber:9},this):e.jsxDEV(N,{children:[e.jsxDEV(i,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(i,{align:"center",gap:4,children:[e.jsxDEV(Ee,{size:"md",placeholder:n("common.search"),w:400,maxW:"50vw",onChange:s=>I(s.target.value),value:P},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:204,columnNumber:15},this),e.jsxDEV(xe,{dateRange:b,setDateRange:R,size:"md"},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:213,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:201,columnNumber:13},this),e.jsxDEV(N,{children:e.jsxDEV(S,{size:"sm",colorScheme:"blue",onClick:()=>{r()},isDisabled:!E("APPOINTMENT_ADD"),children:n("buttons.addNewAppointment")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:220,columnNumber:15},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:219,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:197,columnNumber:11},this),e.jsxDEV(i,{alignItems:"top",justifyContent:"space-between",children:[" ",e.jsxDEV(be,{colorScheme:"blue",onChange:B,value:p,children:e.jsxDEV(i,{mb:5,gap:4,alignItems:"center",children:Ye.map(s=>e.jsxDEV(ge,{value:s.value,children:n(s.label)},s.value,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:246,columnNumber:19},this))},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:241,columnNumber:15},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:237,columnNumber:13},this)," ",e.jsxDEV(S,{isLoading:Q||q,size:"sm",colorScheme:"blue",onClick:()=>{T.invalidateQueries(["appointments",u,x,p],{refetchInactive:!0})},rightIcon:e.jsxDEV(Ne,{size:14},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:263,columnNumber:26},this),children:n("appointments.buttons.refreshTable")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:233,columnNumber:11},this),e.jsxDEV(he,{minPad:"1px 10px",data:a==null?void 0:a.data,onActionClick:e.jsxDEV($e,{onClick:()=>{},navigate:d},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:273,columnNumber:15},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:268,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:196,columnNumber:9},this),e.jsxDEV(i,{justify:"center",mt:4,children:e.jsxDEV(De,{currentPage:u,onPageChange:W,totalPages:G},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:285,columnNumber:9},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:282,columnNumber:7},this),t&&e.jsxDEV(Pe,{isOpen:t,onClose:l},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:295,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:170,columnNumber:5},this):e.jsxDEV(fe,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:167,columnNumber:50},this)}const $e=({onClick:d,rowData:t,navigate:r})=>{const{hasPermission:l}=Y();return e.jsxDEV(i,{justify:"center",children:l("APPOINTMENT_UPDATE")&&e.jsxDEV(Ue,{size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{d(t),r(`/appointment/${t.id}`)},icon:e.jsxDEV(_e,{fontSize:18,color:de.colors.blue[500]},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:319,columnNumber:13},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:310,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Appointments/index.jsx",lineNumber:307,columnNumber:5},void 0)};export{fs as default};
