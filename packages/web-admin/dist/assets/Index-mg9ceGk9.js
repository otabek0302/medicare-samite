import{w as M,x as y,v as e,y as b,aG as K,z as D,r as g,D as W,B as f,L as P,O as G}from"./index-BFPSIpCx.js";import{F as H}from"./index-C7DuEf2v.js";import{e as Y}from"./index-xAROFF34.js";import{u as J}from"./SettingData-DvTyOSTZ.js";import{T as X,A as Z,a as $,N as ee,S as x,D as ie}from"./Dashboard-CmmBgoMl.js";import{u as se}from"./UseSearchFilter-C_f_OzUw.js";import{A as ae}from"./AddMedicine-DiY9ov_1.js";import{h as me,u as E,M as ne,b as S,a as ce,c as U,g as re,d as z,F as V,e as O,f as h}from"./index.esm-Cjy54hoM.js";import{u as de}from"./useMutation-BKXcVg_b.js";import{D as te}from"./createLucideIcon-C1VZi4Qy.js";import{d as I,I as A,F as j}from"./utils-DGMmCGlW.js";import{u as F}from"./HasPermission-Dz1RX8IC.js";import{u as p,I as C}from"./index-CexvglWR.js";import"./tr-BasSmpYP.js";import"./image-4nR63Jb_.js";import"./visually-hidden.style-BGGO2DOy.js";const oe=async a=>{const s=await K(D.token,"update_prescribe_medicines",a);if(s.response!==200)throw new Error(s.message);return s};function le({isOpen:a,onClose:s,data:m}){const{t:i}=M(),{register:n,handleSubmit:d}=me(),t=E(),o=y(),c=de({mutationFn:async r=>{await oe(r)},onSuccess:()=>{o.invalidateQueries({queryKey:["medicines"]}),h(t,"success",i("medicines.update.messages.success")),s()},onError:()=>{h(t,"error",i("medicines.update.messages.error"))}}),l=r=>{c.mutate({...r,id:m.id})};return e.jsxDEV(ne,{isOpen:a,onClose:s,isCentered:!0,children:[e.jsxDEV(S,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:49,columnNumber:7},this),e.jsxDEV(ce,{as:"form",onSubmit:d(l),children:[e.jsxDEV(U,{fontSize:"md",children:i("medicines.update.title")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:51,columnNumber:9},this),e.jsxDEV(re,{top:3},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:52,columnNumber:9},this),e.jsxDEV(te,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:53,columnNumber:9},this),e.jsxDEV(z,{children:[e.jsxDEV(I,{isRequired:!0,children:[e.jsxDEV(V,{fontSize:"sm",children:i("medicines.update.form.name.label")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:56,columnNumber:13},this),e.jsxDEV(A,{size:"md",placeholder:i("medicines.update.form.name.placeholder"),...n("title",{required:!0}),defaultValue:m.title},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:57,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:55,columnNumber:11},this),e.jsxDEV(I,{mt:3,children:[e.jsxDEV(V,{fontSize:"sm",children:i("medicines.update.form.notes.label")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:65,columnNumber:13},this),e.jsxDEV(X,{size:"md",placeholder:i("medicines.update.form.notes.placeholder"),...n("notes"),defaultValue:m.notes},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:66,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:64,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:54,columnNumber:9},this),e.jsxDEV(O,{children:[e.jsxDEV(b,{colorScheme:"gray",mr:3,onClick:s,size:"sm",children:i("medicines.update.buttons.close")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:76,columnNumber:11},this),e.jsxDEV(b,{colorScheme:"blue",size:"sm",type:"submit",isLoading:c.isPending,children:i("medicines.update.buttons.update")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:83,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:75,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:50,columnNumber:7},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/UpdateMedicine.jsx",lineNumber:48,columnNumber:5},this)}function ue({isOpen:a,onClose:s,data:m}){const{t:i}=M(),n=E(),d=g.useRef(null),t=y(),[o,c]=g.useState(!1),l=async()=>{let r={id:m.id};try{c(!0);const u=await W(D.token,"delete_prescribe_medicines",r);c(!1),u.response===200?(h(n,"success",i("medicines.delete.messages.success")),t.invalidateQueries({queryKey:["medicines"]}),s()):h(n,"error",u.message)}catch{c(!1),h(n,"error",i("medicines.delete.messages.error"))}};return e.jsxDEV(Z,{isOpen:a,onClose:s,leastDestructiveRef:d,isCentered:!0,children:e.jsxDEV(S,{children:e.jsxDEV($,{children:[e.jsxDEV(U,{fontSize:"lg",fontWeight:"semi-bold",children:[i("medicines.delete.title")," ( ",e.jsxDEV("b",{children:m==null?void 0:m.title},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:53,columnNumber:45},this)," )"]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:52,columnNumber:11},this),e.jsxDEV(z,{children:i("medicines.delete.message")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:56,columnNumber:11},this),e.jsxDEV(O,{children:[e.jsxDEV(b,{ref:d,onClick:s,colorScheme:"gray",size:"sm",children:i("medicines.delete.buttons.cancel")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:61,columnNumber:13},this),e.jsxDEV(b,{colorScheme:"red",onClick:l,ml:3,size:"sm",isLoading:o,children:i("medicines.delete.buttons.delete")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:68,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:60,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:51,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:50,columnNumber:7},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/DeleteMedicine.jsx",lineNumber:45,columnNumber:5},this)}function Ce(){const{t:a}=M(),{hasPermission:s}=F(),{isOpen:m,onOpen:i,onClose:n}=p(),[d,t]=g.useState(),{isOpen:o,onOpen:c,onClose:l}=p(),{isOpen:r,onOpen:u,onClose:T}=p(),w=E(),k="Errortoast",_=async()=>(await G(D.token,"get_prescribe_medicines")).data,L=N=>{t(N)},{isLoading:q,data:v,error:B}=J({queryKey:["medicines"],queryFn:_}),{handleSearchChange:R,filteredData:Q}=se(v);return B&&(w.isActive(k)||w({id:k,title:a("medicines.index.messages.error.title"),description:a("medicines.index.messages.error.description"),status:"error",duration:2e3,isClosable:!0,position:"top"})),s("MEDICINE_VIEW")?e.jsxDEV(f,{children:[q||!v?e.jsxDEV(f,{children:[e.jsxDEV(j,{mb:5,justify:"space-between",children:[e.jsxDEV(x,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:77,columnNumber:13},this),e.jsxDEV(x,{w:50,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:74,columnNumber:11},this),e.jsxDEV(x,{h:300,w:"100%"},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:86,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:73,columnNumber:9},this):e.jsxDEV(f,{children:[e.jsxDEV(j,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(A,{size:"md",placeholder:a("medicines.index.search.placeholder"),w:400,maxW:"50vw",onChange:N=>R(N.target.value)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:97,columnNumber:13},this),e.jsxDEV(f,{children:e.jsxDEV(b,{size:"sm",colorScheme:"blue",onClick:i,isDisabled:!s("MEDICINE_ADD"),children:a("medicines.index.buttons.addNew")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:105,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:104,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:93,columnNumber:11},this),e.jsxDEV(ie,{data:Q,onActionClick:e.jsxDEV(he,{onClick:L,EditonOpen:u,DeleteonOpen:c},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:118,columnNumber:15},this),minPad:"8px 8px",imgLast:!1},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:114,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:92,columnNumber:9},this),e.jsxDEV(ae,{isOpen:m,onClose:n},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:130,columnNumber:7},this),r&&e.jsxDEV(le,{isOpen:r,onClose:T,data:d},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:135,columnNumber:9},this),o&&e.jsxDEV(ue,{isOpen:o,onClose:l,data:d},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:142,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:71,columnNumber:5},this):e.jsxDEV(ee,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:68,columnNumber:47},this)}const he=({onClick:a,rowData:s,EditonOpen:m,DeleteonOpen:i})=>{const{hasPermission:n}=F();return e.jsxDEV(j,{justify:"center",children:[e.jsxDEV(C,{"aria-label":"Edit medicine",isDisabled:!n("MEDICINE_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(s),m()},icon:e.jsxDEV(Y,{fontSize:18,color:P.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:170,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:157,columnNumber:7},void 0),e.jsxDEV(C,{"aria-label":"Delete medicine",isDisabled:!n("MEDICINE_DELETE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(s),i()},icon:e.jsxDEV(H,{fontSize:18,color:P.colors.red[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:189,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:176,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Medicines/Index.jsx",lineNumber:156,columnNumber:5},void 0)};export{Ce as default};
