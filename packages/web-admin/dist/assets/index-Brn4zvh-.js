import{w as h,r as d,U as Y,v as e,B as g,y as M,G as k,K as B,N as F,z as R}from"./index-BqRQ5zR-.js";import{e as z}from"./index-D6RHo-Rw.js";import{u as $}from"./SettingData-CxfeWvqW.js";import{u as Q,N as G,D as L,P as O,S as N}from"./Dashboard-DfQ9GR_Q.js";import{A as q}from"./AddPatients-CDuxvzLe.js";import{u as E}from"./HasPermission-BxGNMDGA.js";import{u as K}from"./UseSearchFilter-HwQh-PCQ.js";import{u as W}from"./index.esm-CDWxJwJY.js";import{F as c,I as H}from"./utils-BcOZwoxx.js";import{u as J,I as X}from"./index-CdSaDTFS.js";import"./index-CS1DgOx7.js";import"./createLucideIcon-Ha6tAQX1.js";import"./tr-IqXuou1v.js";import"./image-CynZshwF.js";import"./visually-hidden.style-BiwU0iRL.js";import"./useMutation-9OMn6k9Q.js";import"./IsdModal-DYnTCngq.js";import"./today-D_vLUvRX.js";import"./grid-DgSVtHSd.js";import"./input-group-D9TmQQ8n.js";import"./input-addon-Cb0INng4.js";import"./select-BdYZ_n_k.js";import"./split-CzYrjwZo.js";const j=50,Z=(s,n)=>{const a=(s-1)*n,t=a+n-1;return{startIndex:a,endIndex:t}},ee=s=>s==null?void 0:s.map(n=>{const{id:a,f_name:t,l_name:i,phone:o,gender:u,dob:l,email:f,image:x,created_at:p}=n;return{id:a,name:`${t} ${i}`,phone:o,gender:u,date_Of_Birth:l?k(l).format("DD MMM YYYY"):"N/A",email:f||"N/A",image:x,created_At:k(p).format("DD MMM YYYY hh:mm a")}}),_e=()=>{const{t:s}=h(),{hasPermission:n}=E(),[a,t]=d.useState(null),[i,o]=d.useState(1),[u,l]=d.useState(""),f=Q(u,1e3),{startIndex:x,endIndex:p}=Z(i,j),{isOpen:y,onOpen:_,onClose:w}=J(),b=W(),U=Y(),D=d.useRef(null),{isLoading:V,data:m,error:P}=$({queryKey:["patients",i,f],queryFn:async()=>{const r=await F(R.token,`get_patient/page?start=${x}&end=${p}`);return{data:r.data,totalRecord:r.total_record}}}),A=r=>o(r);d.useEffect(()=>{D.current&&D.current.scrollIntoView({behavior:"smooth",block:"start"})},[i]),d.useEffect(()=>{P&&!b.isActive("Errortoast")&&b({id:"Errortoast",title:s("patients.messages.error"),description:s("patients.messages.error"),status:"error",duration:2e3,isClosable:!0,position:"top"})},[P,b]);const I=ee(m==null?void 0:m.data),S=Math.ceil((m==null?void 0:m.totalRecord)/j),T=r=>t(r),{handleSearchChange:C,filteredData:v}=K(I);return n("PATIENT_VIEW")?e.jsxDEV(g,{children:[V||!m?e.jsxDEV(se,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:110,columnNumber:9},void 0):e.jsxDEV(g,{children:[e.jsxDEV(c,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(H,{size:"md",placeholder:s("patients.placeholder.search"),w:400,maxW:"50vw",onChange:r=>C(r.target.value)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV(M,{size:"sm",colorScheme:"blue",onClick:_,isDisabled:!n("PATIENT_ADD"),children:s("patients.add.buttons.add")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:125,columnNumber:13},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:113,columnNumber:11},void 0),e.jsxDEV(L,{imgLast:!0,minPad:"1px 20px",data:v,onActionClick:e.jsxDEV(ne,{onClick:T,navigate:U,rowData:a},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:138,columnNumber:15},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:133,columnNumber:11},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:112,columnNumber:9},void 0),e.jsxDEV(c,{justify:"center",mt:4,children:e.jsxDEV(O,{currentPage:i,onPageChange:A,totalPages:S},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:150,columnNumber:9},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:147,columnNumber:7},void 0),e.jsxDEV(q,{isOpen:y,onClose:w,nextFn:()=>{t(null),o(1)}},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:156,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:108,columnNumber:5},void 0):e.jsxDEV(G,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:105,columnNumber:46},void 0)},se=()=>e.jsxDEV(g,{children:[e.jsxDEV(c,{mb:5,justify:"space-between",children:[e.jsxDEV(N,{w:400,h:8},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:173,columnNumber:7},void 0),e.jsxDEV(N,{w:200,h:8},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:177,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:170,columnNumber:5},void 0),Array.from({length:10}).map((s,n)=>e.jsxDEV(N,{h:10,w:"100%",mt:2},n,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:183,columnNumber:7},void 0))]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:169,columnNumber:3},void 0),ne=({onClick:s,rowData:n,navigate:a})=>{const{hasPermission:t}=E(),{t:i}=h();return e.jsxDEV(c,{justify:"center",children:e.jsxDEV(X,{"aria-label":i("patients.update.actions.edit"),isDisabled:!t("PATIENT_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{s(n),a(`/patient/${n.id}`)},icon:e.jsxDEV(z,{fontSize:18,color:B.colors.blue[500]},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:210,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:199,columnNumber:7},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:198,columnNumber:5},void 0)};export{_e as default};
