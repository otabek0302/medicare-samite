import{O as U,z as V,r as t,V as z,w as B,v as e,B as l,y as F,J as E,L as v}from"./index-BFPSIpCx.js";import{F as L}from"./index-C7DuEf2v.js";import{e as q}from"./index-xAROFF34.js";import{u as S}from"./SettingData-DvTyOSTZ.js";import{u as G,N as Q,S as m,D as O,P as W}from"./Dashboard-CmmBgoMl.js";import{u as y}from"./HasPermission-Dz1RX8IC.js";import{u as K}from"./index.esm-Cjy54hoM.js";import{F as u,I as H}from"./utils-DGMmCGlW.js";import{R as J,a as P}from"./radio-8LR8lopu.js";import{I as k}from"./index-CexvglWR.js";import"./createLucideIcon-C1VZi4Qy.js";import"./tr-BasSmpYP.js";import"./image-4nR63Jb_.js";import"./visually-hidden.style-BGGO2DOy.js";import"./split-CzYrjwZo.js";const X=async()=>(await U(V.token,"get_roles")).data,Z=()=>{const{isLoading:a,data:s,error:r}=S({queryKey:["Roles"],queryFn:X});return{rolesData:s,rolesLoading:a,rolesError:r}},I=50,ee=(a,s)=>{const r=(a-1)*s,n=r+s-1;return{startIndex:r,endIndex:n}},ae=a=>a==null?void 0:a.map(s=>{const{id:r,f_name:n,l_name:c,phone:o,gender:x,dob:h,email:N,image:b,wallet_amount:g,created_at:f}=s;return{id:r,image:b,name:`${n} ${c}`,Phone:`${o}`,Gender:x,DateOfBirth:E(h).format("DD MMM YYYY"),Email:N,"Wallet Balance":g,CreatedAt:E(f).format("DD MMM YYYY hh:mm a")}});function fe(){const[a,s]=t.useState(),r=z(),{hasPermission:n}=y(),c=K(),[o,x]=t.useState(1),[h,N]=t.useState(""),b=G(h,1e3),{startIndex:g,endIndex:f}=ee(o,I),w=t.useRef(null),{rolesData:_,rolesLoading:R}=Z(),[j,C]=t.useState(""),{t:p}=B(),A=async()=>{const i=await U(V.token,`get_users/page?start=${g}&end=${f}&search=${b}&role_id=${j}`);return{data:i.data,total_record:i.total_record}},{isLoading:Y,data:d,error:D}=S({queryKey:["users",o,b,j],queryFn:A}),M=i=>{x(i)},T=Math.ceil((d==null?void 0:d.total_record)/I),$=i=>(s(i),a);return t.useEffect(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth",block:"start"})},[o]),t.useEffect(()=>{D&&!c.isActive("Errortoast")&&c({id:"Errortoast",title:"Oops!",description:"Something bad happened.",status:"error",duration:2e3,isClosable:!0,position:"top"})},[D,c]),n("USER_VIEW")?e.jsxDEV(l,{children:[Y||!d||R?e.jsxDEV(l,{children:[e.jsxDEV(u,{mb:5,justify:"space-between",children:[e.jsxDEV(m,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:115,columnNumber:13},this),e.jsxDEV(m,{w:200,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:119,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:112,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:124,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:129,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:134,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:139,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:144,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:149,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:154,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:159,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:164,columnNumber:11},this),e.jsxDEV(m,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:169,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:111,columnNumber:9},this):e.jsxDEV(l,{children:[e.jsxDEV(u,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(H,{size:"md",placeholder:p("users.index.search"),w:400,maxW:"50vw",onChange:i=>N(i.target.value),value:h},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:181,columnNumber:13},this),e.jsxDEV(l,{children:e.jsxDEV(F,{isDisabled:!n("USER_ADD"),size:"sm",colorScheme:"blue",onClick:()=>{r("/users/add")},children:p("users.index.add")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:190,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:177,columnNumber:11},this),e.jsxDEV(l,{my:2,children:e.jsxDEV(J,{onChange:C,value:j,children:e.jsxDEV(u,{direction:"row",gap:4,wrap:"wrap",children:[e.jsxDEV(P,{value:"",children:p("users.index.tabs.all")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:209,columnNumber:17},this),_.map(i=>e.jsxDEV(P,{value:i.id.toString(),children:i.name},i.id,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:211,columnNumber:19},this))]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:205,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:202,columnNumber:13},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:201,columnNumber:11},this),e.jsxDEV(O,{minPad:"1px 20px",data:ae(d.data),onActionClick:e.jsxDEV(se,{onClick:$,navigate:r},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:224,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:220,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:176,columnNumber:9},this),e.jsxDEV(u,{justify:"center",mt:4,children:e.jsxDEV(W,{currentPage:o,onPageChange:M,totalPages:T},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:235,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:232,columnNumber:7},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:109,columnNumber:5},this):e.jsxDEV(Q,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:106,columnNumber:43},this)}const se=({onClick:a,rowData:s,DeleteonOpen:r,navigate:n})=>{const{hasPermission:c}=y();return e.jsxDEV(u,{justify:"center",children:[e.jsxDEV(k,{isDisabled:!c("USER_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(s),n(`/user/update/${s.id}`)},icon:e.jsxDEV(q,{fontSize:18,color:v.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:261,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:249,columnNumber:7},void 0),e.jsxDEV(k,{isDisabled:!c("USER_DELETE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(s),r()},icon:e.jsxDEV(L,{fontSize:18,color:v.colors.red[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:279,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:267,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Users/Index.jsx",lineNumber:248,columnNumber:5},void 0)};export{fe as default};
