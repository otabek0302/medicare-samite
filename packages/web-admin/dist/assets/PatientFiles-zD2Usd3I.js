import{w as O,r as g,x as L,v as e,B as c,T as v,R as I,S as M,y as w,U as _,z as S,$ as B,H as T,J as H,O as R}from"./index-BFPSIpCx.js";import{j as q,F as U}from"./index-C7DuEf2v.js";import{u as $}from"./SettingData-DvTyOSTZ.js";import{i as Q}from"./image-4nR63Jb_.js";import{a as J,u as E,I as A}from"./index-CexvglWR.js";import{u as W,h as Y,M as G,b as K,a as X,c as Z,g as ee,d as ae,F as ie,e as se,f as b,L as te}from"./index.esm-Cjy54hoM.js";import{D as V}from"./createLucideIcon-C1VZi4Qy.js";import{d as me,I as C,F as y}from"./utils-DGMmCGlW.js";import{V as ne}from"./Dashboard-CmmBgoMl.js";import{U as re,D as ce}from"./DeletePatientFile-BBe-fceJ.js";import{O as le,a as de}from"./list-pOGd3gJE.js";function oe({isOpen:l,onClose:i,id:d}){const{t:a}=O(),o=g.useRef(),r=W(),P=5*1024*1024,p=L(),{register:x,handleSubmit:j,reset:N}=Y(),[F,u]=g.useState(),[h,t]=g.useState(null),D=n=>{n.preventDefault();const s=n.dataTransfer.files[0];s&&s.size>P?b(r,"error",a("patients.patientFiles.add.messages.error")):t(s)},m=n=>{n.preventDefault()},k=n=>{const s=n.target.files[0];s&&s.size>P?b(r,"error",a("patients.patientFiles.add.messages.error")):t(s)},z=async n=>{const s={...n,patient_id:d,file:h};try{u(!0);const f=await _(S.token,"add_patient_file",s);u(!1),f.response===200?(b(r,"success",a("patients.patientFiles.add.messages.success")),p.invalidateQueries(["patient-files",d]),t(null),N(),i()):b(r,"error",f.message)}catch(f){u(!1),b(r,"error",JSON.stringify(f))}};return e.jsxDEV(G,{isOpen:l,onClose:i,isCentered:!0,size:"lg",children:[e.jsxDEV(K,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:86,columnNumber:7},this),e.jsxDEV(X,{as:"form",onSubmit:j(z),children:[e.jsxDEV(Z,{fontSize:18,py:2,children:a("patients.patientFiles.add.title")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:90,columnNumber:9},this),e.jsxDEV(ee,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:95,columnNumber:9},this),e.jsxDEV(V,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:96,columnNumber:9},this),e.jsxDEV(ae,{children:e.jsxDEV(c,{pb:3,children:[e.jsxDEV(me,{isRequired:!0,children:[e.jsxDEV(ie,{children:a("patients.patientFiles.add.form.name.label")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:100,columnNumber:15},this),e.jsxDEV(C,{placeholder:a("patients.patientFiles.add.form.name.placeholder"),...x("file_name",{required:!0})},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:101,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:99,columnNumber:13},this),e.jsxDEV(c,{mt:5,p:4,border:"2px dashed",borderColor:"gray.300",borderRadius:"md",onDrop:D,onDragOver:m,onClick:()=>{o.current&&o.current.click()},cursor:"pointer",children:h?e.jsxDEV(c,{position:"relative",children:[e.jsxDEV(v,{children:[a("patients.patientFiles.add.form.file.selectedFile")," ",h.name]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:125,columnNumber:19},this),e.jsxDEV(I,{position:"absolute",right:-2,top:-2,size:"sm",onClick:()=>{t(null)}},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:126,columnNumber:19},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:123,columnNumber:17},this):e.jsxDEV(c,{children:[e.jsxDEV(ne,{children:[" ",e.jsxDEV(C,{ref:o,type:"file",onChange:k,accept:"*",mb:4},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:140,columnNumber:21},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:138,columnNumber:19},this),e.jsxDEV(M,{children:[" ",e.jsxDEV(J,{fontSize:32},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:152,columnNumber:21},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:150,columnNumber:19},this),e.jsxDEV(v,{textAlign:"center",mt:3,children:[e.jsxDEV("b",{children:a("patients.patientFiles.add.form.file.choose")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:157,columnNumber:21},this)," ",a("patients.patientFiles.add.form.file.dragHere"),e.jsxDEV("br",{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:158,columnNumber:21},this),a("patients.patientFiles.add.form.file.maxSize")]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:154,columnNumber:19},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:137,columnNumber:17},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:107,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:98,columnNumber:11},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:97,columnNumber:9},this),e.jsxDEV(V,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:166,columnNumber:9},this),e.jsxDEV(se,{py:3,children:[e.jsxDEV(w,{colorScheme:"gray",mr:3,onClick:i,size:"sm",children:a("patients.patientFiles.add.buttons.close")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:168,columnNumber:11},this),e.jsxDEV(w,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:F,children:a("patients.patientFiles.add.buttons.add")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:175,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:167,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:87,columnNumber:7},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/AddPatientFiles.jsx",lineNumber:81,columnNumber:5},this)}function De({id:l}){const{t:i}=O(),[d,a]=g.useState(),{isOpen:o,onOpen:r,onClose:P}=E(),{isOpen:p,onOpen:x,onClose:j}=E(),{isOpen:N,onOpen:F,onClose:u}=E(),h=async()=>(await R(S.token,`get_patient_file/patient/${l}`)).data,{data:t,isLoading:D}=$({queryKey:["patient-files",l],queryFn:h});return D?e.jsxDEV(B,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:36,columnNumber:35},this):e.jsxDEV(c,{children:[e.jsxDEV(y,{alignItems:"center",justify:"space-between",children:[" ",e.jsxDEV(T,{as:"h3",size:"sm",children:i("patients.patientFiles.title")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:44,columnNumber:9},this),e.jsxDEV(w,{size:"xs",colorScheme:"blue",onClick:r,children:i("patients.patientFiles.actions.addNew")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:47,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:40,columnNumber:7},this),e.jsxDEV(V,{mt:2,mb:5},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:52,columnNumber:7},this),e.jsxDEV(c,{children:e.jsxDEV(le,{spacing:3,children:t==null?void 0:t.map((m,k)=>e.jsxDEV(de,{children:[e.jsxDEV(y,{alignItems:"center",gap:5,children:[e.jsxDEV(te,{fontWeight:600,href:`${Q}/${m.file}`,isExternal:!0,children:m.file_name},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:59,columnNumber:17},this),e.jsxDEV(A,{"aria-label":i("patients.patientFiles.actions.edit"),size:"xs",icon:e.jsxDEV(q,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:65,columnNumber:25},this),colorScheme:"blue",onClick:()=>{a(m),x()}},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:62,columnNumber:17},this)," ",e.jsxDEV(A,{"aria-label":i("patients.patientFiles.actions.delete"),size:"xs",icon:e.jsxDEV(U,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:75,columnNumber:25},this),colorScheme:"red",onClick:()=>{a(m),F()}},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:72,columnNumber:17},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:58,columnNumber:15},this),e.jsxDEV(v,{fontSize:"xs",fontWeight:600,children:[i("patients.patientFiles.updatedOn")," -"," ",H(m.updated_at).format("DD-MM-YY HH:mm A")]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:83,columnNumber:15},this)]},k,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:57,columnNumber:13},this))},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:54,columnNumber:9},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:53,columnNumber:7},this),e.jsxDEV(oe,{isOpen:o,onClose:P,id:l},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:94,columnNumber:7},this),p?e.jsxDEV(re,{isOpen:p,onClose:j,data:d},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:100,columnNumber:9},this):null,N?e.jsxDEV(ce,{isOpen:N,onClose:u,data:d},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:107,columnNumber:9},this):null]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Patients/PatientFiles.jsx",lineNumber:39,columnNumber:5},this)}export{De as P};
