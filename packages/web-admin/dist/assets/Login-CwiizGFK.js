import{w as A,r as o,v as e,K as f,H as T,y as d,a6 as q,M as G,J}from"./index-BFPSIpCx.js";import{u as x,I as W,b as K,A as U}from"./index-CexvglWR.js";import{u as $,h as Q,S as u,F as j,L as X,M as Y,b as Z,a as _,c as ee,g as ae,d as ie,e as se}from"./index.esm-Cjy54hoM.js";import{F as me}from"./ForgetPassword-8oKFsplh.js";import{F as w,d as k,I as v}from"./utils-DGMmCGlW.js";import{B as P}from"./visually-hidden.style-BGGO2DOy.js";import{I as oe}from"./input-group-BMKEi_kL.js";import{I as re}from"./input-element-DdeHzUWO.js";import{R as ne,a as ce}from"./radio-8LR8lopu.js";import"./useMutation-BKXcVg_b.js";import"./split-CzYrjwZo.js";function te(){return J().add(24,"hours").valueOf()}function we(){const{t:a}=A(),g=$(),{register:h,handleSubmit:E}=Q(),{isOpen:D,onOpen:L,onClose:n}=x(),[V,c]=o.useState(!1),[b,S]=o.useState([]),[t,y]=o.useState(null),[N,C]=o.useState(),[r,I]=o.useState(!1),{isOpen:R,onOpen:F,onClose:O}=x(),M=()=>{I(!r)},B=async i=>{c(!0);try{const s=(await q.post(`${G}/login`,i)).data;c(!1),s.response===200?!s.data.role||s.data.role.length===0?l("login.errors.noPermission"):s.data.role.length>1?(S(s.data.role),C({data:s.data,token:s.token}),L()):p(s.data,s.token,s.data.role[0]):l("login.errors.wrongCredentials")}catch(m){c(!1),l("login.errors.generalError"),console.error(m)}},p=(i,m,s)=>{const H={...i,role:s,token:m,exp:te()};localStorage.setItem("admin",JSON.stringify(H)),g({title:"Login Success.",status:"success",duration:9e3,isClosable:!0,position:"top"}),window.location.reload("/")},l=i=>{g({title:a(i),status:"error",duration:9e3,isClosable:!0,position:"top"})},z=()=>{const i=b.find(m=>m.name===t);i&&(p(N.data,N.token,i),n())};return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(u,{minH:"100vh",direction:{base:"column",md:"row"},background:"url('/admin/loginbg.png')",backgroundSize:"cover",backgroundPosition:"center",children:[e.jsxDEV(w,{p:8,flex:1,align:"center",justify:"center",flexDir:"column",children:e.jsxDEV(u,{spacing:4,w:"full",maxW:"md",as:"form",onSubmit:E(B),bg:"gray.50",padding:8,borderRadius:8,minW:"600px",color:f("gray.800","gray.800"),children:[e.jsxDEV(T,{fontSize:"2xl",children:a("login.title")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:113,columnNumber:13},this),e.jsxDEV(k,{children:[e.jsxDEV(j,{children:[a("login.email"),e.jsxDEV(P,{bg:"transparent",color:"red",children:"*"},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:117,columnNumber:17},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:115,columnNumber:15},this),e.jsxDEV(v,{type:"email",isRequired:!0,placeholder:a("login.email"),...h("email")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:121,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:114,columnNumber:13},this),e.jsxDEV(k,{mt:5,children:[e.jsxDEV(j,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxDEV("span",{children:[a("login.password"),e.jsxDEV(P,{bg:"transparent",color:"red",children:"*"},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:125,columnNumber:17},this),e.jsxDEV(X,{fontSize:14,color:"blue.500",onClick:F,children:a("login.forgotPassword")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:131,columnNumber:17},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:124,columnNumber:15},this),e.jsxDEV(oe,{size:"md",children:[e.jsxDEV(v,{type:r?"text":"password",placeholder:a("login.password"),isRequired:!0,...h("password")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:136,columnNumber:17},this),e.jsxDEV(re,{width:"3rem",children:e.jsxDEV(W,{variant:"ghost",h:"1.75rem",size:"md",onClick:M,icon:r?e.jsxDEV(K,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:138,columnNumber:123},this):e.jsxDEV(U,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:138,columnNumber:148},this),"aria-label":r?"Hide password":"Show password",color:f("gray.800","gray.800")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:138,columnNumber:19},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:137,columnNumber:17},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:135,columnNumber:15},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:123,columnNumber:13},this),e.jsxDEV(d,{colorScheme:"blue",w:"100%",mt:10,type:"submit",isLoading:V,children:a("login.signIn")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:112,columnNumber:11},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:111,columnNumber:9},this),e.jsxDEV(w,{flex:1},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:147,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:110,columnNumber:7},this),e.jsxDEV(Y,{isOpen:D,onClose:n,isCentered:!0,children:[e.jsxDEV(Z,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:155,columnNumber:9},this),e.jsxDEV(_,{children:[e.jsxDEV(ee,{children:a("login.loginAs")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:157,columnNumber:11},this),e.jsxDEV(ae,{},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:158,columnNumber:11},this),e.jsxDEV(ie,{children:e.jsxDEV(ne,{onChange:y,value:t,children:e.jsxDEV(u,{children:[" ",b.map(i=>e.jsxDEV(ce,{value:i.name,children:i.name},i.id,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:166,columnNumber:19},this))]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:162,columnNumber:15},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:161,columnNumber:13},this)},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:159,columnNumber:11},this),e.jsxDEV(se,{children:[e.jsxDEV(d,{colorScheme:"blue",mr:3,onClick:z,isDisabled:!t,children:a("login.continue")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:176,columnNumber:13},this),e.jsxDEV(d,{variant:"ghost",onClick:n,children:a("login.cancel")},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:179,columnNumber:13},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:175,columnNumber:11},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:156,columnNumber:9},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:151,columnNumber:7},this),e.jsxDEV(me,{isOpen:R,onClose:O},void 0,!1,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:187,columnNumber:7},this)]},void 0,!0,{fileName:"/home/chan/medicare-samite/medicare-samite/packages/web-admin/src/Pages/Login.jsx",lineNumber:109,columnNumber:5},this)}export{we as default};
