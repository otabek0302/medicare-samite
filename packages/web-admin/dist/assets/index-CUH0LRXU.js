import{w as E,r as o,V as M,v as e,B as g,y as B,J as j,L as F,O as R,z}from"./index-DPnYdkUz.js";import{e as $}from"./index-Bm_h8oZt.js";import{u as L}from"./SettingData-o9nA5JFe.js";import{u as O,N as Q,D as q,P as G,S as p}from"./Dashboard-yaE9KkgM.js";import{A as W}from"./AddPatients-DRITJh6Z.js";import{u as k}from"./HasPermission-B2qlt3qD.js";import{u as H}from"./UseSearchFilter-BNmhWZYu.js";import{u as J}from"./index.esm-7HBFntiH.js";import{F as d,I as K}from"./utils-CbOPTj9R.js";import{u as U,I as X}from"./index-DKSfyVZ9.js";import"./index-DJio6C7j.js";import"./createLucideIcon-cf9l0Mkm.js";import"./tr-B7dii5kF.js";import"./image-CECpK_E2.js";import"./visually-hidden.style-CjB5JpNG.js";import"./useMutation-VqWrDSyY.js";import"./IsdModal-CDLqM4QY.js";import"./today-D_vLUvRX.js";import"./grid-BRKQYmn5.js";import"./input-group-DWmv1S0J.js";import"./input-addon-CU1dmJBi.js";import"./select-DPafIhJF.js";import"./split-CzYrjwZo.js";const D=50,Z=(a,s)=>{const n=(a-1)*s,i=n+s-1;return{startIndex:n,endIndex:i}},ee=a=>a==null?void 0:a.map(s=>{const{id:n,f_name:i,l_name:t,phone:c,gender:u,dob:l,email:f,image:h,created_at:b}=s;return{id:n,name:`${i} ${t}`,phone:c,gender:u,date_Of_Birth:l?j(l).format("DD MMM YYYY"):"N/A",email:f||"N/A",image:h,created_At:j(b).format("DD MMM YYYY hh:mm a")}}),ve=()=>{const{t:a}=E(),{hasPermission:s}=k(),[n,i]=o.useState(null),[t,c]=o.useState(1),[u,l]=o.useState(""),f=O(u,1e3),{startIndex:h,endIndex:b}=Z(t,D),{isOpen:w,onOpen:v,onClose:V}=U(),x=J(),A=M(),N=o.useRef(null),{isLoading:y,data:m,error:P}=L({queryKey:["patients",t,f],queryFn:async()=>{const r=await R(z.token,`get_patient/page?start=${h}&end=${b}`);return{data:r.data,totalRecord:r.total_record}}}),I=r=>c(r);o.useEffect(()=>{N.current&&N.current.scrollIntoView({behavior:"smooth",block:"start"})},[t]),o.useEffect(()=>{P&&!x.isActive("Errortoast")&&x({id:"Errortoast",title:a("patients.messages.error"),description:a("patients.messages.error"),status:"error",duration:2e3,isClosable:!0,position:"top"})},[P,x]);const _=ee(m==null?void 0:m.data),S=Math.ceil((m==null?void 0:m.totalRecord)/D),T=r=>i(r),{handleSearchChange:C,filteredData:Y}=H(_);return s("PATIENT_VIEW")?e.jsxDEV(g,{children:[y||!m?e.jsxDEV(ae,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:110,columnNumber:9},void 0):e.jsxDEV(g,{children:[e.jsxDEV(d,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(K,{size:"md",placeholder:a("patients.placeholder.search"),w:400,maxW:"50vw",onChange:r=>C(r.target.value)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:117,columnNumber:13},void 0),e.jsxDEV(B,{size:"sm",colorScheme:"blue",onClick:v,isDisabled:!s("PATIENT_ADD"),children:a("patients.add.buttons.add")},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:125,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:113,columnNumber:11},void 0),e.jsxDEV(q,{imgLast:!0,minPad:"1px 20px",data:Y,onActionClick:e.jsxDEV(se,{onClick:T,navigate:A,rowData:n},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:138,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:133,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:112,columnNumber:9},void 0),e.jsxDEV(d,{justify:"center",mt:4,children:e.jsxDEV(G,{currentPage:t,onPageChange:I,totalPages:S},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:150,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:147,columnNumber:7},void 0),e.jsxDEV(W,{isOpen:w,onClose:V,nextFn:()=>{i(null),c(1)}},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:156,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:108,columnNumber:5},void 0):e.jsxDEV(Q,{},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:105,columnNumber:46},void 0)},ae=()=>e.jsxDEV(g,{children:[e.jsxDEV(d,{mb:5,justify:"space-between",children:[e.jsxDEV(p,{w:400,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:173,columnNumber:7},void 0),e.jsxDEV(p,{w:200,h:8},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:177,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:170,columnNumber:5},void 0),Array.from({length:10}).map((a,s)=>e.jsxDEV(p,{h:10,w:"100%",mt:2},s,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:183,columnNumber:7},void 0))]},void 0,!0,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:169,columnNumber:3},void 0),se=({onClick:a,rowData:s,navigate:n})=>{const{hasPermission:i}=k(),{t}=E();return e.jsxDEV(d,{justify:"center",children:e.jsxDEV(X,{"aria-label":t("patients.update.actions.edit"),isDisabled:!i("PATIENT_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(s),n(`/patient/${s.id}`)},icon:e.jsxDEV($,{fontSize:18,color:F.colors.blue[500]},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:210,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:199,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/chan/medicare-samite/packages/web-admin/src/Pages/Patients/index.jsx",lineNumber:198,columnNumber:5},void 0)};export{ve as default};
