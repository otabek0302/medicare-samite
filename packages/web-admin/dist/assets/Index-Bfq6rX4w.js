import{w as M,r as f,x as H,v as e,B as y,y as N,aE as je,z as _,D as ye,G as k,U as _e,K as R,aa as h,N as Ce,M as we}from"./index-BqRQ5zR-.js";import{u as K,j as L}from"./HasPermission-BxGNMDGA.js";import{A as Ue,a as Ee,u as Pe,N as Ve,S as r,g as Ie,D as Se,P as Me,i as Ye}from"./Dashboard-DfQ9GR_Q.js";import{F as ve}from"./index-CS1DgOx7.js";import{e as ze}from"./index-D6RHo-Rw.js";import{u as $e}from"./SettingData-CxfeWvqW.js";import{A as Oe}from"./Add-C_MNkcQv.js";import{h as Ae,u as Y,M as Te,b as Q,a as qe,c as W,g as Re,d as G,F as V,e as J,f as b}from"./index.esm-CDWxJwJY.js";import{t as Le}from"./today-D_vLUvRX.js";import{D as B}from"./createLucideIcon-Ha6tAQX1.js";import{d as I,I as E,F as p}from"./utils-BcOZwoxx.js";import{u as S,I as F}from"./index-CdSaDTFS.js";import"./tr-IqXuou1v.js";import"./image-CynZshwF.js";import"./visually-hidden.style-BiwU0iRL.js";function Be({isOpen:a,onClose:i,data:s}){const{t:n}=M(),[t,m]=f.useState(!1),{register:d,handleSubmit:D,reset:l}=Ae(),g=H(),x=Y(),o=async C=>{const P={...C,id:s.id};try{m(!0);const u=await je(_.token,"update_appointment_checkin",P);m(!1),u.response===200?(b(x,"success",n("checkin.success.updated")),g.invalidateQueries({queryKey:["checkins"]}),l(),i()):b(x,"error",u.message)}catch(u){m(!1),b(x,"error",JSON.stringify(u))}};return e.jsxDEV(Te,{isOpen:a,onClose:i,isCentered:!0,size:"lg",scrollBehavior:"inside",children:[e.jsxDEV(Q,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:53,columnNumber:7},this),e.jsxDEV(qe,{as:"form",onSubmit:D(o),children:[e.jsxDEV(W,{fontSize:18,py:2,children:n("checkin.update.title")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:57,columnNumber:9},this),e.jsxDEV(Re,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:62,columnNumber:9},this),e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:63,columnNumber:9},this),e.jsxDEV(G,{children:[" ",e.jsxDEV(y,{pb:3,children:[e.jsxDEV(I,{isRequired:!0,children:[e.jsxDEV(V,{children:n("checkin.form.appointmentId")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:68,columnNumber:15},this),e.jsxDEV(E,{size:"sm",defaultValue:s==null?void 0:s.appointment_id,placeholder:n("checkin.form.appointmentId"),...d("appointment_id",{required:!0})},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:69,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:67,columnNumber:13},this),e.jsxDEV(I,{isRequired:!0,mt:3,children:[e.jsxDEV(V,{children:n("checkin.form.date")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:79,columnNumber:15},this),e.jsxDEV(E,{max:Le(),defaultValue:s==null?void 0:s.date,size:"sm",type:"date",step:60,placeholder:n("checkin.form.date"),...d("date",{required:!0}),isDisabled:!0},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:80,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:76,columnNumber:13},this),e.jsxDEV(I,{isRequired:!0,mt:3,children:[e.jsxDEV(V,{children:n("checkin.form.time")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:94,columnNumber:15},this),e.jsxDEV(E,{defaultValue:s==null?void 0:s.time,size:"sm",type:"time",step:60,placeholder:n("checkin.form.time"),...d("time",{required:!0})},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:95,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:91,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:66,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:64,columnNumber:9},this),e.jsxDEV(B,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:106,columnNumber:9},this),e.jsxDEV(J,{py:3,children:[e.jsxDEV(N,{colorScheme:"gray",mr:3,onClick:i,size:"sm",children:n("checkin.buttons.close")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:108,columnNumber:11},this),e.jsxDEV(N,{variant:"solid",size:"sm",colorScheme:"blue",type:"submit",isLoading:t,children:n("checkin.buttons.update")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:115,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:107,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:54,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Update.jsx",lineNumber:47,columnNumber:5},this)}function Fe({isOpen:a,onClose:i,data:s}){const{t:n}=M(),t=Y(),m=f.useRef(null),d=H(),[D,l]=f.useState(!1),g=async()=>{const x={id:s.id};try{l(!0);const o=await ye(_.token,"delete_appointment_checkin",x);l(!1),o.response===200?(b(t,"success",n("checkin.success.deleted")),d.invalidateQueries({queryKey:["checkins"]}),i()):b(t,"error",o.message)}catch(o){l(!1),b(t,"error",JSON.stringify(o))}};return e.jsxDEV(Ue,{isOpen:a,onClose:i,leastDestructiveRef:m,isCentered:!0,children:e.jsxDEV(Q,{children:e.jsxDEV(Ee,{children:[e.jsxDEV(W,{fontSize:"lg",fontWeight:"semi-bold",children:[n("checkin.delete.title")," ("," ",e.jsxDEV("b",{children:[s==null?void 0:s.id," , ",s==null?void 0:s.time," ",s==null?void 0:s.date]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:55,columnNumber:13},this)," ",")"]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:53,columnNumber:11},this),e.jsxDEV(G,{children:n("checkin.delete.confirm")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:61,columnNumber:11},this),e.jsxDEV(J,{children:[e.jsxDEV(N,{ref:m,onClick:i,colorScheme:"gray",size:"sm",children:n("checkin.delete.cancel")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:66,columnNumber:13},this),e.jsxDEV(N,{colorScheme:"red",onClick:g,ml:3,size:"sm",isLoading:D,children:n("checkin.delete.delete")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:73,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:65,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:52,columnNumber:9},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:51,columnNumber:7},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Delete.jsx",lineNumber:46,columnNumber:5},this)}const He=k().subtract(Ye,"days").format("YYYY-MM-DD"),Ke=k().format("YYYY-MM-DD"),X=(a,i)=>{const s=(a-1)*i;let n=s+i-1;return{startIndex:s,endIndex:n}};X.propTypes={currentPage:h.number,itemsPerPage:h.number};function ls(){const{t:a}=M(),{hasPermission:i}=K(),[s,n]=f.useState(1),{startIndex:t,endIndex:m}=X(s,50),[d,D]=f.useState(),{isOpen:l,onOpen:g,onClose:x}=S(),o=f.useRef(null),[C,P]=f.useState(""),u=Pe(C,1e3),[w,ee]=f.useState({startDate:He,endDate:Ke}),v=k(w.startDate).format("YYYY-MM-DD"),z=k(w.endDate).format("YYYY-MM-DD"),{isOpen:$,onOpen:se,onClose:ne}=S(),{isOpen:O,onOpen:ie,onClose:ae}=S(),re=_e(),A=Y(),T="Errortoast",te=async()=>{const c=_.role.name==="Doctor"?`get_appointment_check_in_page?start=${t}&end=${m}&search=${u}&start_date=${v}&end_date=${z}&doctor_id=${_.id}`:`get_appointment_check_in_page?start=${t}&end=${m}&search=${u}&start_date=${v}&end_date=${z}`,U=await Ce(_.token,c);return{data:U==null?void 0:U.data.map(ue=>{const{id:fe,appointment_id:q,time:xe,date:pe,created_at:ke,updated_at:he,doct_f_name:be,doct_l_name:Ne,patient_f_name:De,patient_l_name:ge}=ue;return{id:fe,app_id:e.jsxDEV(we,{to:`/appointment/${q}`,children:e.jsxDEV(p,{gap:1,align:"center",children:[q," ",e.jsxDEV(L,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:82,columnNumber:32},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:79,columnNumber:13},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:78,columnNumber:11},this),doctor:`${be} ${Ne}`,patient:`${De} ${ge}`,Date:k(pe).format("DD MMM YYYY"),Time:k(xe,"HH:mm:ss").format("hh:mm A"),created_at:ke,updated_at:he}}),total_record:U.total_record}},me=c=>{D(c)},{isLoading:ce,data:j,error:de}=$e({queryKey:["checkins",s,u,w],queryFn:te}),le=c=>{n(c)},oe=Math.ceil((j==null?void 0:j.total_record)/50);return de&&(A.isActive(T)||A({id:T,title:a("errors.oops"),description:a("errors.somethingWrong"),status:"error",duration:2e3,isClosable:!0,position:"top"})),i("CHECKIN_VIEW")?e.jsxDEV(y,{ref:o,children:[ce||!j?e.jsxDEV(y,{children:[e.jsxDEV(p,{mb:5,justify:"space-between",children:[e.jsxDEV(r,{w:400,h:8},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:132,columnNumber:13},this),e.jsxDEV(r,{w:200,h:8},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:129,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:141,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:146,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:151,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:156,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:161,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:166,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:171,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:176,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:181,columnNumber:11},this),e.jsxDEV(r,{h:10,w:"100%",mt:2},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:186,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:128,columnNumber:9},this):e.jsxDEV(y,{children:[e.jsxDEV(p,{mb:5,justify:"space-between",align:"center",children:[e.jsxDEV(E,{size:"md",placeholder:a("common.search"),w:400,maxW:"50vw",onChange:c=>P(c.target.value),value:C},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:198,columnNumber:13},this),e.jsxDEV(Ie,{dateRange:w,setDateRange:ee,size:"md",setLastDays:()=>{}},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:206,columnNumber:13},this),e.jsxDEV(y,{children:e.jsxDEV(p,{align:"center",gap:5,children:[" ",e.jsxDEV(N,{size:"sm",colorScheme:"blue",onClick:()=>{const c=`${window.location.protocol}//${window.location.host}`;window.open(`${c}/admin/queue`,"_blank")},rightIcon:e.jsxDEV(L,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:225,columnNumber:30},this),children:a("buttons.showDisplay")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:217,columnNumber:17},this),e.jsxDEV(N,{isDisabled:!i("CHECKIN_ADD"),size:"sm",colorScheme:"blue",onClick:()=>g(),children:a("buttons.newCheckin")},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:228,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:213,columnNumber:15},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:194,columnNumber:11},this),e.jsxDEV(Se,{data:j.data,onActionClick:e.jsxDEV(Z,{onClick:me,navigate:re,EditionOpen:se,DeleteonOpen:ie},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:241,columnNumber:15},this),minPad:0,imgLast:!1},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:238,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:193,columnNumber:9},this),e.jsxDEV(p,{justify:"center",mt:4,children:e.jsxDEV(Me,{currentPage:s,onPageChange:le,totalPages:oe},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:258,columnNumber:9},this)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:255,columnNumber:7},this),l&&e.jsxDEV(Oe,{isOpen:l,onClose:x},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:266,columnNumber:9},this),$&&e.jsxDEV(Be,{data:d,isOpen:$,onClose:ne},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:272,columnNumber:9},this),O&&e.jsxDEV(Fe,{isOpen:O,onClose:ae,data:d},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:280,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:126,columnNumber:5},this):e.jsxDEV(Ve,{},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:123,columnNumber:46},this)}const Z=({onClick:a,rowData:i,DeleteonOpen:s,EditionOpen:n})=>{const{hasPermission:t}=K();return e.jsxDEV(p,{justify:"center",children:[e.jsxDEV(F,{"aria-label":"Edit",isDisabled:!t("CHECKIN_UPDATE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(i),n()},icon:e.jsxDEV(ze,{fontSize:18,color:R.colors.blue[500]},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:308,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:295,columnNumber:7},void 0),e.jsxDEV(F,{"aria-label":"Delete",isDisabled:!t("CHECKIN_DELETE"),size:"sm",variant:"ghost",_hover:{background:"none"},onClick:()=>{a(i),s()},icon:e.jsxDEV(ve,{fontSize:18,color:R.colors.red[500]},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:327,columnNumber:11},void 0)},void 0,!1,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:314,columnNumber:7},void 0)]},void 0,!0,{fileName:"/Users/fenix_systems/Desktop/medicare-master/packages/web-admin/src/Pages/Checkin/Index.jsx",lineNumber:294,columnNumber:5},void 0)};Z.propTypes={onClick:h.func,rowData:h.object,DeleteonOpen:h.func,EditionOpen:h.func};export{ls as default};
